/*! For license information please see ../LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{761:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(794),c=n(798),l=function(){function e(e){this.allowReport=!0,this.enableResume=!0,this.getSignature=e.getSignature,void 0!==e.allowReport&&(this.allowReport=e.allowReport),void 0!==e.enableResume&&(this.enableResume=e.enableResume),this.appId=e.appId,this.reportId=e.reportId}return e.prototype.upload=function(e){var t=r({getSignature:this.getSignature,appId:this.appId,reportId:this.reportId,enableResume:this.enableResume},e),n=new o.default(t);return this.allowReport&&this.initReporter(n),n.start(),n},e.prototype.initReporter=function(e){new c.VodReporter(e)},e}();t.default=l},793:function(e,t,n){"use strict";var r=n(802),o=n(803),c=n(804),l=n(807);function d(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}var f=function(){},h=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&null!==e[n]&&(t[n]=e[n]);return t};function m(e){return map(e,(function(e){return"object"==typeof e?m(e):e}))}function y(e,source){return C(source,(function(t,n){e[n]=source[n]})),e}function v(e){return e instanceof Array}function C(e,t){for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)}function map(e,t){var n=v(e)?[]:{};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i],i));return n}var S,k,x,w,T,_=function(e,t){if(t=y({},t),"getAuth"!==e&&"getV4Auth"!==e&&"getObjectUrl"!==e){var n=t.Headers||{};if(t&&"object"==typeof t){!function(){for(var e in t)t.hasOwnProperty(e)&&e.indexOf("x-cos-")>-1&&(n[e]=t[e])}();E.each({"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext"},(function(e,r){void 0!==t[e]&&(n[r]=t[e])})),t.Headers=h(n)}}return t},R=function(e){return Date.now()+(e||0)},E={noop:f,formatParams:_,apiWrapper:function(e,t){return function(n,r){"function"==typeof n&&(r=n,n={}),n=_(e,n);var o=function(e){return e&&e.headers&&(e.headers["x-cos-version-id"]&&(e.VersionId=e.headers["x-cos-version-id"]),e.headers["x-cos-delete-marker"]&&(e.DeleteMarker=e.headers["x-cos-delete-marker"])),e},c=function(e,data){r&&r(o(e),o(data))};if("getService"!==e&&"abortUploadTask"!==e){var l;if(l=function(e,t){var n=t.Bucket,r=t.Region,o=t.Key;if(e.indexOf("Bucket")>-1||"deleteMultipleObject"===e||"multipartList"===e||"listObjectVersions"===e){if(!n)return"Bucket";if(!r)return"Region"}else if(e.indexOf("Object")>-1||e.indexOf("multipart")>-1||"sliceUploadFile"===e||"abortUploadTask"===e){if(!n)return"Bucket";if(!r)return"Region";if(!o)return"Key"}return!1}(e,n))return void c({error:"missing param "+l});if(n.Region){if(n.Region.indexOf("cos.")>-1)return void c({error:'param Region should not be start with "cos."'});if(!/^([a-z\d-]+)$/.test(n.Region))return void c({error:"Region format error."});this.options.CompatibilityMode||-1!==n.Region.indexOf("-")||"yfb"===n.Region||"default"===n.Region||console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(n.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(n.Bucket))if(n.AppId)n.Bucket=n.Bucket+"-"+n.AppId;else{if(!this.options.AppId)return void c({error:'Bucket should format as "test-1250000000".'});n.Bucket=n.Bucket+"-"+this.options.AppId}n.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete n.AppId)}!this.options.UseRawKey&&n.Key&&"/"===n.Key.substr(0,1)&&(n.Key=n.Key.substr(1))}var d=t.call(this,n,c);if("getAuth"===e||"getObjectUrl"===e)return d}},xml2json:c,json2xml:l,md5:r,clearKey:h,getFileMd5:function(e,t){!function(e,t){var n,r=new FileReader;FileReader.prototype.readAsBinaryString?(n=FileReader.prototype.readAsBinaryString,r.onload=function(){t(this.result)}):FileReader.prototype.readAsArrayBuffer?n=function(e){var n="",r=new FileReader;r.onload=function(e){for(var o=new Uint8Array(r.result),c=o.byteLength,i=0;i<c;i++)n+=String.fromCharCode(o[i]);t(n)},r.readAsArrayBuffer(e)}:console.error("FileReader not support readAsBinaryString"),n.call(r,e)}(e,(function(content){var e=r(content,!0);t(null,e)}))},binaryBase64:function(e){var i,t,n,r="";for(i=0,t=e.length/2;i<t;i++)n=parseInt(e[2*i]+e[2*i+1],16),r+=String.fromCharCode(n);return btoa(r)},extend:y,isArray:v,isInArray:function(e,t){for(var n=!1,i=0;i<e.length;i++)if(t===e[i]){n=!0;break}return n},each:C,map:map,filter:function(e,t){var n=v(e),r=n?[]:{};for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)&&(n?r.push(e[i]):r[i]=e[i]);return r},clone:m,uuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},camSafeUrlEncode:d,throttleOnProgress:function(e,t){var n,r,o=this,c=0,l=0,d=Date.now();function f(){if(r=0,t&&"function"==typeof t){n=Date.now();var o,f=Math.max(0,Math.round((l-c)/((n-d)/1e3)*100)/100);o=0===l&&0===e?1:Math.round(l/e*100)/100||0,d=n,c=l;try{t({loaded:l,total:e,speed:f,percent:o})}catch(e){}}}return function(t,n){if(t&&(l=t.loaded,e=t.total),n)clearTimeout(r),f();else{if(r)return;r=setTimeout(f,o.options.ProgressInterval)}}},getFileSize:function(e,t,n){var r;"string"==typeof t.Body&&(t.Body=new Blob([t.Body],{type:"text/plain"})),t.Body&&(t.Body instanceof Blob||"[object File]"===t.Body.toString()||"[object Blob]"===t.Body.toString())?(r=t.Body.size,t.ContentLength=r,n(null,r)):n({error:"params body format error, Only allow File|Blob|String."})},getSkewTime:R,getAuth:function(e){var t,n=(e=e||{}).SecretId,r=e.SecretKey,c=(e.method||e.Method||"get").toLowerCase(),l=m(e.Query||e.params||{}),f=m(e.Headers||e.headers||{}),h=e.Key||"";if(e.UseRawKey?t=e.Pathname||e.pathname||"/"+h:0!==(t=e.Pathname||e.pathname||h).indexOf("/")&&(t="/"+t),!n)return console.error("missing param SecretId");if(!r)return console.error("missing param SecretKey");var y=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort((function(a,b){return(a=a.toLowerCase())===(b=b.toLowerCase())?0:a>b?1:-1}))},v=function(e){var i,t,n,r=[],o=y(e);for(i=0;i<o.length;i++)n=void 0===e[t=o[i]]||null===e[t]?"":""+e[t],t=d(t=t.toLowerCase()),n=d(n)||"",r.push(t+"="+n);return r.join("&")},C=Math.round(R(e.SystemClockOffset)/1e3)-1,S=C,k=e.Expires||e.expires,x=n,w=C+";"+(S+=void 0===k?900:1*k||0),T=C+";"+S,_=y(f).join(";").toLowerCase(),E=y(l).join(";").toLowerCase(),A=o.HmacSHA1(T,r).toString(),N=[c,t,v(l),v(f),""].join("\n"),I=["sha1",w,o.SHA1(N).toString(),""].join("\n");return["q-sign-algorithm=sha1","q-ak="+x,"q-sign-time="+w,"q-key-time="+T,"q-header-list="+_,"q-url-param-list="+E,"q-signature="+o.HmacSHA1(I,A).toString()].join("&")},isBrowser:!0},A=(T=function(a,b){a=a.split("."),b=b.split(".");for(var i=0;i<b.length;i++)if(a[i]!==b[i])return parseInt(a[i])>parseInt(b[i])?1:-1;return 0},S=navigator&&navigator.userAgent,k=(S.match(/Chrome\/([.\d]+)/)||[])[1],x=(S.match(/QBCore\/([.\d]+)/)||[])[1],w=(S.match(/QQBrowser\/([.\d]+)/)||[])[1],k&&T(k,"53.0.2785.116")<0&&x&&T(x,"3.53.991.400")<0&&w&&T(w,"9.0.2524.400")<=0||!1);E.fileSlice=function(e,t,n,r,o){var c;if(e.slice?c=e.slice(t,n):e.mozSlice?c=e.mozSlice(t,n):e.webkitSlice&&(c=e.webkitSlice(t,n)),r&&A){var l=new FileReader;l.onload=function(e){c=null,o(new Blob([l.result]))},l.readAsArrayBuffer(c)}else o(c)},E.getFileUUID=function(e,t){return e.name&&e.size&&e.lastModifiedDate&&t?E.md5([e.name,e.size,e.lastModifiedDate,t].join("::")):null},E.getBodyMd5=function(e,t,n){n=n||f,e?"string"==typeof t?n(E.md5(t,!0)):Blob&&t instanceof Blob?E.getFileMd5(t,(function(e,t){n(t)})):n():n()},e.exports=E},794:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,b){e.__proto__=b}||function(e,b){for(var p in b)b.hasOwnProperty(p)&&(e[p]=b[p])})(e,b)},function(e,b){function t(){this.constructor=e}r(e,b),e.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}),c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},d=this&&this.__generator||function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.UploaderEvent=t.vodAxios=void 0;var f,h=n(799),m=n(800),y=n(816),v=n(58),C=n(797),S=n(798),k=n(818);t.vodAxios=v.default.create(),function(e){e.video_progress="video_progress",e.media_progress="media_progress",e.video_upload="video_upload",e.media_upload="media_upload",e.cover_progress="cover_progress",e.cover_upload="cover_upload"}(f=t.UploaderEvent||(t.UploaderEvent={}));var x=function(e){function n(t){var n=e.call(this)||this;return n.sessionName="",n.vodSessionKey="",n.appId=0,n.reqKey=k(),n.reportId="",n.enableResume=!0,n.applyRequestTimeout=5e3,n.applyRequestRetryCount=3,n.commitRequestTimeout=5e3,n.commitRequestRetryCount=3,n.retryDelay=1e3,n.validateInitParams(t),n.videoFile=t.mediaFile||t.videoFile,n.getSignature=t.getSignature,n.enableResume=t.enableResume,n.videoName=t.mediaName||t.videoName,n.coverFile=t.coverFile,n.fileId=t.fileId,n.applyRequestTimeout=t.applyRequestTimeout||n.applyRequestTimeout,n.commitRequestTimeout=t.commitRequestTimeout||n.commitRequestTimeout,n.retryDelay=t.retryDelay||n.retryDelay,n.appId=t.appId||n.appId,n.reportId=t.reportId||n.reportId,n.genFileInfo(),n}return o(n,e),n.prototype.setStorage=function(e,t){if(e){var n="webugc_"+h(e);try{localStorage.setItem(n,t)}catch(e){}}},n.prototype.getStorage=function(e){if(e){var t="webugc_"+h(e),n=null;try{n=localStorage.getItem(t)}catch(e){}return n}},n.prototype.delStorage=function(e){if(e){var t="webugc_"+h(e);try{localStorage.removeItem(t)}catch(e){}}},n.prototype.validateInitParams=function(e){if(!C.default.isFunction(e.getSignature))throw new Error("getSignature must be a function");if(e.videoFile&&!C.default.isFile(e.videoFile))throw new Error("videoFile must be a File")},n.prototype.genFileInfo=function(){var e=this.videoFile;if(e){var t=e.name.lastIndexOf("."),n="";if(this.videoName){if(!C.default.isString(this.videoName))throw new Error("mediaName must be a string");if(/[:*?<>\"\\/|]/g.test(this.videoName))throw new Error('Cant use these chars in filename: \\ / : * ? " < > |');n=this.videoName}else n=e.name.substring(0,t);this.videoInfo={name:n,type:e.name.substring(t+1).toLowerCase(),size:e.size},this.sessionName+=e.name+"_"+e.size+";"}var r=this.coverFile;if(r){var o=r.name,c=o.lastIndexOf(".");this.coverInfo={name:o.substring(0,c),type:o.substring(c+1).toLowerCase(),size:r.size},this.sessionName+=r.name+"_"+r.size+";"}},n.prototype.applyUploadUGC=function(e){return void 0===e&&(e=0),l(this,void 0,void 0,(function(){function n(t){return l(this,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:if(r.emit(S.VodReportEvent.report_apply,{err:t,requestStartTime:y}),r.delStorage(r.sessionName),r.applyRequestRetryCount==e){if(t)throw t;throw new Error("apply upload failed")}return[4,C.default.delay(r.retryDelay)];case 1:return n.sent(),[2,r.applyUploadUGC(e+1)]}}))}))}var r,o,c,f,h,m,y,v,k,x,w,T;return d(this,(function(e){switch(e.label){case 0:return r=this,[4,this.getSignature()];case 1:if(o=e.sent(),f=this.videoInfo,h=this.coverInfo,m=this.vodSessionKey||this.enableResume&&this.getStorage(this.sessionName))c={signature:o,vodSessionKey:m};else if(f)c={signature:o,videoName:f.name,videoType:f.type,videoSize:f.size},h&&(c.coverName=h.name,c.coverType=h.type,c.coverSize=h.size);else{if(!this.fileId||!h)throw"Wrong params, please check and try again";c={signature:o,fileId:this.fileId,coverName:h.name,coverType:h.type,coverSize:h.size}}y=new Date,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.vodAxios.post("https://vod2.qcloud.com/v3/index.php?Action=ApplyUploadUGC",c,{timeout:this.applyRequestTimeout,withCredentials:!1})];case 3:return v=e.sent(),[3,5];case 4:return[2,n(e.sent())];case 5:return 0==(k=v.data).code?(x=k.data,w=x.vodSessionKey,this.setStorage(this.sessionName,w),this.vodSessionKey=w,this.appId=x.appId,this.emit(S.VodReportEvent.report_apply,{data:x,requestStartTime:y}),[2,x]):((T=new Error(k.message)).code=k.code,[2,n(T)])}}))}))},n.prototype.uploadToCos=function(e){return l(this,void 0,void 0,(function(){var t,n,r,o,h,y,v,k;return d(this,(function(x){switch(x.label){case 0:return t=this,n={bucket:e.storageBucket+"-"+e.storageAppId,region:e.storageRegionV5},r=new m({getAuthorization:function(t,n){return l(this,void 0,void 0,(function(){return d(this,(function(t){return n({TmpSecretId:e.tempCertificate.secretId,TmpSecretKey:e.tempCertificate.secretKey,XCosSecurityToken:e.tempCertificate.token,StartTime:e.timestamp,ExpiredTime:e.tempCertificate.expiredTime}),[2]}))}))}}),this.cos=r,o=[],this.videoFile&&(h=c(c({},n),{file:this.videoFile,key:e.video.storagePath,onProgress:function(data){t.emit(f.video_progress,data),t.emit(f.media_progress,data)},onUpload:function(data){t.emit(f.video_upload,data),t.emit(f.media_upload,data)},onTaskReady:function(e){t.taskId=e}}),o.push(h)),this.coverFile&&(y=c(c({},n),{file:this.coverFile,key:e.cover.storagePath,onProgress:function(data){t.emit(f.cover_progress,data)},onUpload:function(data){t.emit(f.cover_upload,data)},onTaskReady:C.default.noop}),o.push(y)),v=new Date,k=o.map((function(e){return new Promise((function(n,o){r.sliceUploadFile({Bucket:e.bucket,Region:e.region,Key:e.key,Body:e.file,onTaskReady:e.onTaskReady,onProgress:e.onProgress},(function(r,data){return e.file===t.videoFile&&t.emit(S.VodReportEvent.report_cos_upload,{err:r,requestStartTime:v}),r?(t.delStorage(t.sessionName),'{"error":"error","headers":{}}'===JSON.stringify(r)?o(new Error("cors error")):void o(r)):(e.onUpload(data),n())}))}))})),[4,Promise.all(k)];case 1:return[2,x.sent()]}}))}))},n.prototype.commitUploadUGC=function(e){return void 0===e&&(e=0),l(this,void 0,void 0,(function(){function n(t){return l(this,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:if(r.emit(S.VodReportEvent.report_commit,{err:t,requestStartTime:f}),r.commitRequestRetryCount==e){if(t)throw t;throw new Error("commit upload failed")}return[4,C.default.delay(r.retryDelay)];case 1:return n.sent(),[2,r.commitUploadUGC(e+1)]}}))}))}var r,o,c,f,h,m,y;return d(this,(function(e){switch(e.label){case 0:return r=this,[4,this.getSignature()];case 1:o=e.sent(),this.delStorage(this.sessionName),c=this.vodSessionKey,f=new Date,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.vodAxios.post("https://vod2.qcloud.com/v3/index.php?Action=CommitUploadUGC",{signature:o,vodSessionKey:c},{timeout:this.commitRequestTimeout,withCredentials:!1})];case 3:return h=e.sent(),[3,5];case 4:return[2,n(e.sent())];case 5:return 0==(m=h.data).code?(this.emit(S.VodReportEvent.report_commit,{data:m.data,requestStartTime:f}),[2,m.data]):((y=new Error(m.message)).code=m.code,[2,n(y)])}}))}))},n.prototype.start=function(){var e=this,t=new Date;this.donePromise=this._start().then((function(n){return e.emit(S.VodReportEvent.report_done,{err:{code:0},requestStartTime:t}),n})).catch((function(n){throw e.emit(S.VodReportEvent.report_done,{err:{code:n&&n.code||C.default.CLIENT_ERROR_CODE.UPLOAD_FAIL},requestStartTime:t}),n}))},n.prototype._start=function(){return l(this,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return[4,this.applyUploadUGC()];case 1:return e=t.sent(),[4,this.uploadToCos(e)];case 2:return t.sent(),[4,this.commitUploadUGC()];case 3:return[2,t.sent()]}}))}))},n.prototype.done=function(){return this.donePromise},n.prototype.cancel=function(){this.cos.cancelTask(this.taskId)},n}(y.EventEmitter);t.default=x},795:function(e,t){function n(e,t){for(var p in e)t[p]=e[p]}function r(e,t){var r=e.prototype;if(Object.create){var o=Object.create(t.prototype);r.__proto__=o}if(!(r instanceof t)){function c(){}c.prototype=t.prototype,n(r,c=new c),e.prototype=r=c}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var o={},c=o.ELEMENT_NODE=1,l=o.ATTRIBUTE_NODE=2,d=o.TEXT_NODE=3,f=o.CDATA_SECTION_NODE=4,h=o.ENTITY_REFERENCE_NODE=5,m=o.ENTITY_NODE=6,y=o.PROCESSING_INSTRUCTION_NODE=7,v=o.COMMENT_NODE=8,C=o.DOCUMENT_NODE=9,S=o.DOCUMENT_TYPE_NODE=10,k=o.DOCUMENT_FRAGMENT_NODE=11,x=o.NOTATION_NODE=12,w={},T={},_=(w.INDEX_SIZE_ERR=(T[1]="Index size error",1),w.DOMSTRING_SIZE_ERR=(T[2]="DOMString size error",2),w.HIERARCHY_REQUEST_ERR=(T[3]="Hierarchy request error",3)),R=(w.WRONG_DOCUMENT_ERR=(T[4]="Wrong document",4),w.INVALID_CHARACTER_ERR=(T[5]="Invalid character",5),w.NO_DATA_ALLOWED_ERR=(T[6]="No data allowed",6),w.NO_MODIFICATION_ALLOWED_ERR=(T[7]="No modification allowed",7),w.NOT_FOUND_ERR=(T[8]="Not found",8)),E=(w.NOT_SUPPORTED_ERR=(T[9]="Not supported",9),w.INUSE_ATTRIBUTE_ERR=(T[10]="Attribute in use",10));w.INVALID_STATE_ERR=(T[11]="Invalid state",11),w.SYNTAX_ERR=(T[12]="Syntax error",12),w.INVALID_MODIFICATION_ERR=(T[13]="Invalid modification",13),w.NAMESPACE_ERR=(T[14]="Invalid namespace",14),w.INVALID_ACCESS_ERR=(T[15]="Invalid access",15);function A(code,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,T[code]),this.message=T[code],Error.captureStackTrace&&Error.captureStackTrace(this,A);return t.code=code,e&&(this.message=this.message+": "+e),t}function N(){}function I(e,t){this._node=e,this._refresh=t,B(this)}function B(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);ue(e,"length",r.length),n(r,e),e._inc=t}}function D(){}function P(e,t){for(var i=e.length;i--;)if(e[i]===t)return i}function O(e,t,n,r){if(r?t[P(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var o=e.ownerDocument;o&&(r&&K(o,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(o,e,n))}}function L(e,t,n){var i=P(t,n);if(!(i>=0))throw A(R,new Error(e.tagName+"@"+n));for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,e){var o=e.ownerDocument;o&&(K(o,e,n),n.ownerElement=null)}}function j(e){if(this._features={},e)for(var t in e)this._features=e[t]}function M(){}function U(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function H(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(H(e,t))return!0}while(e=e.nextSibling)}function F(){}function K(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function z(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var o=t.firstChild,i=0;o;)r[i++]=o,o=o.nextSibling;r.length=i}}}function X(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,z(e.ownerDocument,e),t}function G(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===k){var o=t.firstChild;if(null==o)return t;var c=t.lastChild}else o=c=t;var pre=n?n.previousSibling:e.lastChild;o.previousSibling=pre,c.nextSibling=n,pre?pre.nextSibling=o:e.firstChild=o,null==n?e.lastChild=c:n.previousSibling=c;do{o.parentNode=e}while(o!==c&&(o=o.nextSibling));return z(e.ownerDocument||e,e),t.nodeType==k&&(t.firstChild=t.lastChild=null),t}function V(){this._nsMap={}}function W(){}function $(){}function J(){}function Q(){}function Y(){}function Z(){}function ee(){}function te(){}function ne(){}function re(){}function oe(){}function ie(){}function ae(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,o=r.prefix,c=r.namespaceURI;if(c&&null==o&&null==(o=r.lookupPrefix(c)))var l=[{namespace:c,prefix:null}];return ce(this,n,e,t,l),n.join("")}function se(e,t,n){var r=e.prefix||"",o=e.namespaceURI;if(!r&&!o)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var i=n.length;i--;){var c=n[i];if(c.prefix==r)return c.namespace!=o}return!0}function ce(e,t,n,r,o){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case c:o||(o=[]);o.length;var m=e.attributes,x=m.length,w=e.firstChild,T=e.tagName;n="http://www.w3.org/1999/xhtml"===e.namespaceURI||n,t.push("<",T);for(var i=0;i<x;i++){"xmlns"==(_=m.item(i)).prefix?o.push({prefix:_.localName,namespace:_.value}):"xmlns"==_.nodeName&&o.push({prefix:"",namespace:_.value})}for(i=0;i<x;i++){var _;if(se(_=m.item(i),0,o)){var R=_.prefix||"",E=_.namespaceURI,A=R?" xmlns:"+R:" xmlns";t.push(A,'="',E,'"'),o.push({prefix:R,namespace:E})}ce(_,t,n,r,o)}if(se(e,0,o)){R=e.prefix||"",E=e.namespaceURI,A=R?" xmlns:"+R:" xmlns";t.push(A,'="',E,'"'),o.push({prefix:R,namespace:E})}if(w||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(T)){if(t.push(">"),n&&/^script$/i.test(T))for(;w;)w.data?t.push(w.data):ce(w,t,n,r,o),w=w.nextSibling;else for(;w;)ce(w,t,n,r,o),w=w.nextSibling;t.push("</",T,">")}else t.push("/>");return;case C:case k:for(w=e.firstChild;w;)ce(w,t,n,r,o),w=w.nextSibling;return;case l:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,U),'"');case d:return t.push(e.data.replace(/[<&]/g,U));case f:return t.push("<![CDATA[",e.data,"]]>");case v:return t.push("\x3c!--",e.data,"--\x3e");case S:var N=e.publicId,I=e.systemId;if(t.push("<!DOCTYPE ",e.name),N)t.push(' PUBLIC "',N),I&&"."!=I&&t.push('" "',I),t.push('">');else if(I&&"."!=I)t.push(' SYSTEM "',I,'">');else{var sub=e.internalSubset;sub&&t.push(" [",sub,"]"),t.push(">")}return;case y:return t.push("<?",e.target," ",e.data,"?>");case h:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ue(object,e,t){object[e]=t}A.prototype=Error.prototype,n(w,A),N.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)ce(this[i],n,e,t);return n.join("")}},I.prototype.item=function(i){return B(this),this[i]},r(I,N),D.prototype={length:0,item:N.prototype.item,getNamedItem:function(e){for(var i=this.length;i--;){var t=this[i];if(t.nodeName==e)return t}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new A(E);var n=this.getNamedItem(e.nodeName);return O(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new A(E);return t=this.getNamedItemNS(e.namespaceURI,e.localName),O(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return L(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return L(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var i=this.length;i--;){var n=this[i];if(n.localName==t&&n.namespaceURI==e)return n}return null}},j.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new F;if(r.implementation=this,r.childNodes=new N,r.doctype=n,n&&r.appendChild(n),t){var o=r.createElementNS(e,t);r.appendChild(o)}return r},createDocumentType:function(e,t,n){var r=new Z;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return G(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return X(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var o=new n.constructor;for(var d in n){var f=n[d];"object"!=typeof f&&f!=o[d]&&(o[d]=f)}n.childNodes&&(o.childNodes=new N);switch(o.ownerDocument=t,o.nodeType){case c:var h=n.attributes,m=o.attributes=new D,y=h.length;m._ownerElement=o;for(var i=0;i<y;i++)o.setAttributeNode(e(t,h.item(i),!0));break;case l:r=!0}if(r)for(var v=n.firstChild;v;)o.appendChild(e(t,v,r)),v=v.nextSibling;return o}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==d&&e.nodeType==d?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var map=t._nsMap;if(map)for(var n in map)if(map[n]==e)return n;t=t.nodeType==l?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var map=t._nsMap;if(map&&e in map)return map[e];t=t.nodeType==l?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(o,M),n(o,M.prototype),F.prototype={nodeName:"#document",nodeType:C,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==k){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==c&&(this.documentElement=e),G(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),X(this,e)},importNode:function(e,t){return function e(t,n,r){var o;switch(n.nodeType){case c:(o=n.cloneNode(!1)).ownerDocument=t;case k:break;case l:r=!0}o||(o=n.cloneNode(!1));if(o.ownerDocument=t,o.parentNode=null,r)for(var d=n.firstChild;d;)o.appendChild(e(t,d,r)),d=d.nextSibling;return o}(this,e,t)},getElementById:function(e){var t=null;return H(this.documentElement,(function(n){if(n.nodeType==c&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new V;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new N,(t.attributes=new D)._ownerElement=t,t},createDocumentFragment:function(){var e=new re;return e.ownerDocument=this,e.childNodes=new N,e},createTextNode:function(data){var e=new J;return e.ownerDocument=this,e.appendData(data),e},createComment:function(data){var e=new Q;return e.ownerDocument=this,e.appendData(data),e},createCDATASection:function(data){var e=new Y;return e.ownerDocument=this,e.appendData(data),e},createProcessingInstruction:function(e,data){var t=new oe;return t.ownerDocument=this,t.tagName=t.target=e,t.nodeValue=t.data=data,t},createAttribute:function(e){var t=new W;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new ne;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new V,r=t.split(":"),o=n.attributes=new D;return n.childNodes=new N,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,o._ownerElement=n,n},createAttributeNS:function(e,t){var n=new W,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(F,M),V.prototype={nodeType:c,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===k?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var pre=e.lastChild;n.removeChild(t);pre=e.lastChild}return pre=e.lastChild,t.parentNode=e,t.previousSibling=pre,t.nextSibling=null,pre?pre.nextSibling=t:e.firstChild=t,e.lastChild=t,z(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new I(this,(function(base){var t=[];return H(base,(function(n){n===base||n.nodeType!=c||"*"!==e&&n.tagName!=e||t.push(n)})),t}))},getElementsByTagNameNS:function(e,t){return new I(this,(function(base){var n=[];return H(base,(function(r){r===base||r.nodeType!==c||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||n.push(r)})),n}))}},F.prototype.getElementsByTagName=V.prototype.getElementsByTagName,F.prototype.getElementsByTagNameNS=V.prototype.getElementsByTagNameNS,r(V,M),W.prototype.nodeType=l,r(W,M),$.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(text){text=this.data+text,this.nodeValue=this.data=text,this.length=text.length},insertData:function(e,text){this.replaceData(e,0,text)},appendChild:function(e){throw new Error(T[_])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,text){text=this.data.substring(0,e)+text+this.data.substring(e+t),this.nodeValue=this.data=text,this.length=text.length}},r($,M),J.prototype={nodeName:"#text",nodeType:d,splitText:function(e){var text=this.data,t=text.substring(e);text=text.substring(0,e),this.data=this.nodeValue=text,this.length=text.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},r(J,$),Q.prototype={nodeName:"#comment",nodeType:v},r(Q,$),Y.prototype={nodeName:"#cdata-section",nodeType:f},r(Y,$),Z.prototype.nodeType=S,r(Z,M),ee.prototype.nodeType=x,r(ee,M),te.prototype.nodeType=m,r(te,M),ne.prototype.nodeType=h,r(ne,M),re.prototype.nodeName="#document-fragment",re.prototype.nodeType=k,r(re,M),oe.prototype.nodeType=y,r(oe,M),ie.prototype.serializeToString=function(e,t,n){return ae.call(e,t,n)},M.prototype.toString=ae;try{if(Object.defineProperty){Object.defineProperty(I.prototype,"length",{get:function(){return B(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case c:case k:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(data){switch(this.nodeType){case c:case k:for(;this.firstChild;)this.removeChild(this.firstChild);(data||String(data))&&this.appendChild(this.ownerDocument.createTextNode(data));break;default:this.data=data,this.value=data,this.nodeValue=data}}}),ue=function(object,e,t){object["$$"+e]=t}}}catch(e){}t.DOMImplementation=j,t.XMLSerializer=ie},796:function(e,t){var n=function(e){var t={},n=function(e){return!t[e]&&(t[e]=[]),t[e]};e.on=function(e,t){"task-list-update"===e&&console.warn('warning: Event "'+e+'" has been deprecated. Please use "list-update" instead.'),n(e).push(t)},e.off=function(e,t){for(var r=n(e),i=r.length-1;i>=0;i--)t===r[i]&&r.splice(i,1)},e.emit=function(e,data){for(var t=n(e).map((function(e){return e})),i=0;i<t.length;i++)t[i](data)}};e.exports.init=n,e.exports.EventProxy=function(){n(this)}},797:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UPLOAD_FAIL=1]="UPLOAD_FAIL"}(r||(r={})),t.default={isFile:function(e){return"[object File]"==Object.prototype.toString.call(e)},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},noop:function(){},delay:function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},isTest:!1,isDev:!1,CLIENT_ERROR_CODE:r}},798:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VodReporter=t.VodReportEvent=void 0;var o,c,l=n(794),d=n(817),f=n(797);!function(e){e.report_apply="report_apply",e.report_cos_upload="report_cos_upload",e.report_commit="report_commit",e.report_done="report_done"}(o=t.VodReportEvent||(t.VodReportEvent={})),function(e){e[e.apply=10001]="apply",e[e.cos_upload=20001]="cos_upload",e[e.commit=10002]="commit",e[e.done=40001]="done"}(c||(c={}));var h=function(){function e(e,t){this.baseReportData={version:d.version,platform:3e3,device:navigator.userAgent},this.reportUrl="https://vodreport.qcloud.com/ugcupload_new",this.uploader=e,this.options=t,this.init()}return e.prototype.init=function(){this.uploader.on(o.report_apply,this.onApply.bind(this)),this.uploader.on(o.report_cos_upload,this.onCosUpload.bind(this)),this.uploader.on(o.report_commit,this.onCommit.bind(this)),this.uploader.on(o.report_done,this.onDone.bind(this))},e.prototype.onApply=function(e){try{var t=this.uploader;if(!t.videoFile)return;Object.assign(this.baseReportData,{appId:t.appId,fileSize:t.videoFile.size,fileName:t.videoFile.name,fileType:t.videoFile.type,vodSessionKey:t.vodSessionKey,reqKey:t.reqKey,reportId:t.reportId});var n={reqType:c.apply,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(n.errCode=1,n.vodErrCode=e.err.code,n.errMsg=e.err.message),e.data&&(this.baseReportData.cosRegion=e.data.storageRegionV5),this.report(n)}catch(e){if(console.error("onApply",e),f.default.isTest)throw e}},e.prototype.onCosUpload=function(e){try{var t={reqType:c.cos_upload,errCode:0,cosErrCode:"",errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(t.errCode=1,t.cosErrCode=e.err.error?e.err.error.Code:e.err,e.err&&"error"===e.err.error&&(t.cosErrCode="cors error"),t.errMsg=JSON.stringify(e.err)),this.report(t)}catch(e){if(console.error("onCosUpload",e),f.default.isTest)throw e}},e.prototype.onCommit=function(e){try{var t={reqType:c.commit,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(t.errCode=1,t.vodErrCode=e.err.code,t.errMsg=e.err.message),e.data&&(this.baseReportData.fileId=e.data.fileId),this.report(t)}catch(e){if(console.error("onCommit",e),f.default.isTest)throw e}},e.prototype.onDone=function(e){try{var t={reqType:c.done,errCode:e.err&&e.err.code,reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};this.report(t)}catch(e){if(console.error("onDone",e),f.default.isTest)throw e}},e.prototype.report=function(e){e=r(r({},this.baseReportData),e),this.send(e)},e.prototype.send=function(e){f.default.isDev||f.default.isTest?console.log("send reportData",e):l.vodAxios.post(this.reportUrl,e)},e}();t.VodReporter=h},799:function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(762),HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(t){return new Sha1(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(t){return e.create().update(t)};for(var i=0;i<OUTPUT_TYPES.length;++i){var t=OUTPUT_TYPES[i];e[t]=createOutputMethod(t)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var code,i,n=0,r=e.length||0,o=this.blocks;n<r;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),t)for(i=this.start;n<r&&i<64;++n)o[i>>2]|=e[n]<<SHIFT[3&i++];else for(i=this.start;n<r&&i<64;++n)(code=e.charCodeAt(n))<128?o[i>>2]|=code<<SHIFT[3&i++]:code<2048?(o[i>>2]|=(192|code>>6)<<SHIFT[3&i++],o[i>>2]|=(128|63&code)<<SHIFT[3&i++]):code<55296||code>=57344?(o[i>>2]|=(224|code>>12)<<SHIFT[3&i++],o[i>>2]|=(128|code>>6&63)<<SHIFT[3&i++],o[i>>2]|=(128|63&code)<<SHIFT[3&i++]):(code=65536+((1023&code)<<10|1023&e.charCodeAt(++n)),o[i>>2]|=(240|code>>18)<<SHIFT[3&i++],o[i>>2]|=(128|code>>12&63)<<SHIFT[3&i++],o[i>>2]|=(128|code>>6&63)<<SHIFT[3&i++],o[i>>2]|=(128|63&code)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=o[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,i=this.lastByteIndex;e[16]=this.block,e[i>>2]|=EXTRA[3&i],this.block=e[16],i>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,a=this.h0,b=this.h1,n=this.h2,r=this.h3,o=this.h4,c=this.blocks;for(e=16;e<80;++e)t=c[e-3]^c[e-8]^c[e-14]^c[e-16],c[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)a=(t=(b=(t=(n=(t=(r=(t=(o=(t=a<<5|a>>>27)+(b&n|~b&r)+o+1518500249+c[e]<<0)<<5|o>>>27)+(a&(b=b<<30|b>>>2)|~a&n)+r+1518500249+c[e+1]<<0)<<5|r>>>27)+(o&(a=a<<30|a>>>2)|~o&b)+n+1518500249+c[e+2]<<0)<<5|n>>>27)+(r&(o=o<<30|o>>>2)|~r&a)+b+1518500249+c[e+3]<<0)<<5|b>>>27)+(n&(r=r<<30|r>>>2)|~n&o)+a+1518500249+c[e+4]<<0,n=n<<30|n>>>2;for(;e<40;e+=5)a=(t=(b=(t=(n=(t=(r=(t=(o=(t=a<<5|a>>>27)+(b^n^r)+o+1859775393+c[e]<<0)<<5|o>>>27)+(a^(b=b<<30|b>>>2)^n)+r+1859775393+c[e+1]<<0)<<5|r>>>27)+(o^(a=a<<30|a>>>2)^b)+n+1859775393+c[e+2]<<0)<<5|n>>>27)+(r^(o=o<<30|o>>>2)^a)+b+1859775393+c[e+3]<<0)<<5|b>>>27)+(n^(r=r<<30|r>>>2)^o)+a+1859775393+c[e+4]<<0,n=n<<30|n>>>2;for(;e<60;e+=5)a=(t=(b=(t=(n=(t=(r=(t=(o=(t=a<<5|a>>>27)+(b&n|b&r|n&r)+o-1894007588+c[e]<<0)<<5|o>>>27)+(a&(b=b<<30|b>>>2)|a&n|b&n)+r-1894007588+c[e+1]<<0)<<5|r>>>27)+(o&(a=a<<30|a>>>2)|o&b|a&b)+n-1894007588+c[e+2]<<0)<<5|n>>>27)+(r&(o=o<<30|o>>>2)|r&a|o&a)+b-1894007588+c[e+3]<<0)<<5|b>>>27)+(n&(r=r<<30|r>>>2)|n&o|r&o)+a-1894007588+c[e+4]<<0,n=n<<30|n>>>2;for(;e<80;e+=5)a=(t=(b=(t=(n=(t=(r=(t=(o=(t=a<<5|a>>>27)+(b^n^r)+o-899497514+c[e]<<0)<<5|o>>>27)+(a^(b=b<<30|b>>>2)^n)+r-899497514+c[e+1]<<0)<<5|r>>>27)+(o^(a=a<<30|a>>>2)^b)+n-899497514+c[e+2]<<0)<<5|n>>>27)+(r^(o=o<<30|o>>>2)^a)+b-899497514+c[e+3]<<0)<<5|b>>>27)+(n^(r=r<<30|r>>>2)^o)+a-899497514+c[e+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+a<<0,this.h1=this.h1+b<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+o<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,h1=this.h1,h2=this.h2,h3=this.h3,h4=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[h1>>28&15]+HEX_CHARS[h1>>24&15]+HEX_CHARS[h1>>20&15]+HEX_CHARS[h1>>16&15]+HEX_CHARS[h1>>12&15]+HEX_CHARS[h1>>8&15]+HEX_CHARS[h1>>4&15]+HEX_CHARS[15&h1]+HEX_CHARS[h2>>28&15]+HEX_CHARS[h2>>24&15]+HEX_CHARS[h2>>20&15]+HEX_CHARS[h2>>16&15]+HEX_CHARS[h2>>12&15]+HEX_CHARS[h2>>8&15]+HEX_CHARS[h2>>4&15]+HEX_CHARS[15&h2]+HEX_CHARS[h3>>28&15]+HEX_CHARS[h3>>24&15]+HEX_CHARS[h3>>20&15]+HEX_CHARS[h3>>16&15]+HEX_CHARS[h3>>12&15]+HEX_CHARS[h3>>8&15]+HEX_CHARS[h3>>4&15]+HEX_CHARS[15&h3]+HEX_CHARS[h4>>28&15]+HEX_CHARS[h4>>24&15]+HEX_CHARS[h4>>20&15]+HEX_CHARS[h4>>16&15]+HEX_CHARS[h4>>12&15]+HEX_CHARS[h4>>8&15]+HEX_CHARS[h4>>4&15]+HEX_CHARS[15&h4]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,h1=this.h1,h2=this.h2,h3=this.h3,h4=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,h1>>24&255,h1>>16&255,h1>>8&255,255&h1,h2>>24&255,h2>>16&255,h2>>8&255,255&h2,h3>>24&255,h3>>16&255,h3>>8&255,255&h3,h4>>24&255,h4>>16&255,h4>>8&255,255&h4]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(288),__webpack_require__(39))},800:function(e,t,n){var r=n(801);e.exports=r},801:function(e,t,n){"use strict";var r=n(793),o=n(796),c=n(808),base=n(809),l=n(814),d={AppId:"",SecretId:"",SecretKey:"",XCosSecurityToken:"",FileParallelLimit:3,ChunkParallelLimit:3,ChunkRetryTimes:3,ChunkSize:1048576,SliceSize:1048576,CopyChunkParallelLimit:20,CopyChunkSize:10485760,CopySliceSize:10485760,MaxPartNumber:1e4,ProgressInterval:1e3,UploadQueueSize:1e4,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadIdCacheLimit:50},f=function(e){this.options=r.extend(r.clone(d),e||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1048576,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1048576,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),o.init(this),c.init(this)};base.init(f,c),l.init(f,c),f.getAuthorization=r.getAuth,f.version="0.5.16",e.exports=f},802:function(e,t){function n(e,t){var a=e[0],b=e[1],n=e[2],r=e[3];a=o(a,b,n,r,t[0],7,-680876936),r=o(r,a,b,n,t[1],12,-389564586),n=o(n,r,a,b,t[2],17,606105819),b=o(b,n,r,a,t[3],22,-1044525330),a=o(a,b,n,r,t[4],7,-176418897),r=o(r,a,b,n,t[5],12,1200080426),n=o(n,r,a,b,t[6],17,-1473231341),b=o(b,n,r,a,t[7],22,-45705983),a=o(a,b,n,r,t[8],7,1770035416),r=o(r,a,b,n,t[9],12,-1958414417),n=o(n,r,a,b,t[10],17,-42063),b=o(b,n,r,a,t[11],22,-1990404162),a=o(a,b,n,r,t[12],7,1804603682),r=o(r,a,b,n,t[13],12,-40341101),n=o(n,r,a,b,t[14],17,-1502002290),a=c(a,b=o(b,n,r,a,t[15],22,1236535329),n,r,t[1],5,-165796510),r=c(r,a,b,n,t[6],9,-1069501632),n=c(n,r,a,b,t[11],14,643717713),b=c(b,n,r,a,t[0],20,-373897302),a=c(a,b,n,r,t[5],5,-701558691),r=c(r,a,b,n,t[10],9,38016083),n=c(n,r,a,b,t[15],14,-660478335),b=c(b,n,r,a,t[4],20,-405537848),a=c(a,b,n,r,t[9],5,568446438),r=c(r,a,b,n,t[14],9,-1019803690),n=c(n,r,a,b,t[3],14,-187363961),b=c(b,n,r,a,t[8],20,1163531501),a=c(a,b,n,r,t[13],5,-1444681467),r=c(r,a,b,n,t[2],9,-51403784),n=c(n,r,a,b,t[7],14,1735328473),a=l(a,b=c(b,n,r,a,t[12],20,-1926607734),n,r,t[5],4,-378558),r=l(r,a,b,n,t[8],11,-2022574463),n=l(n,r,a,b,t[11],16,1839030562),b=l(b,n,r,a,t[14],23,-35309556),a=l(a,b,n,r,t[1],4,-1530992060),r=l(r,a,b,n,t[4],11,1272893353),n=l(n,r,a,b,t[7],16,-155497632),b=l(b,n,r,a,t[10],23,-1094730640),a=l(a,b,n,r,t[13],4,681279174),r=l(r,a,b,n,t[0],11,-358537222),n=l(n,r,a,b,t[3],16,-722521979),b=l(b,n,r,a,t[6],23,76029189),a=l(a,b,n,r,t[9],4,-640364487),r=l(r,a,b,n,t[12],11,-421815835),n=l(n,r,a,b,t[15],16,530742520),a=d(a,b=l(b,n,r,a,t[2],23,-995338651),n,r,t[0],6,-198630844),r=d(r,a,b,n,t[7],10,1126891415),n=d(n,r,a,b,t[14],15,-1416354905),b=d(b,n,r,a,t[5],21,-57434055),a=d(a,b,n,r,t[12],6,1700485571),r=d(r,a,b,n,t[3],10,-1894986606),n=d(n,r,a,b,t[10],15,-1051523),b=d(b,n,r,a,t[1],21,-2054922799),a=d(a,b,n,r,t[8],6,1873313359),r=d(r,a,b,n,t[15],10,-30611744),n=d(n,r,a,b,t[6],15,-1560198380),b=d(b,n,r,a,t[13],21,1309151649),a=d(a,b,n,r,t[4],6,-145523070),r=d(r,a,b,n,t[11],10,-1120210379),n=d(n,r,a,b,t[2],15,718787259),b=d(b,n,r,a,t[9],21,-343485551),e[0]=v(a,e[0]),e[1]=v(b,e[1]),e[2]=v(n,e[2]),e[3]=v(r,e[3])}function r(q,a,b,e,s,t){return a=v(v(a,q),v(e,t)),v(a<<s|a>>>32-s,b)}function o(a,b,e,t,n,s,o){return r(b&e|~b&t,a,b,n,s,o)}function c(a,b,e,t,n,s,o){return r(b&t|e&~t,a,b,n,s,o)}function l(a,b,e,t,n,s,o){return r(b^e^t,a,b,n,s,o)}function d(a,b,e,t,n,s,o){return r(e^(b|~t),a,b,n,s,o)}function f(s){var i,e=[];for(i=0;i<64;i+=4)e[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return e}var h="0123456789abcdef".split("");function m(e){for(var s="",t=0;t<4;t++)s+=h[e>>8*t+4&15]+h[e>>8*t&15];return s}function y(s,e){return e||(s=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(s)),function(e){for(var i=0;i<e.length;i++)e[i]=m(e[i]);return e.join("")}(function(s){var i,e=s.length,t=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)n(t,f(s.substring(i-64,i)));s=s.substring(i-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)r[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(r[i>>2]|=128<<(i%4<<3),i>55)for(n(t,r),i=0;i<16;i++)r[i]=0;return r[14]=8*e,n(t,r),t}(s))}var v=function(a,b){return a+b&4294967295};"5d41402abc4b2a76b9719d911017c592"!=y("hello")&&(v=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}),e.exports=y},803:function(e,t,n){var g,r,o,c,l,d,f,h=h||function(g,e){var t={},n=t.lib={},r=function(){},o=n.Base={extend:function(a){r.prototype=this;var e=new r;return a&&e.mixIn(a),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var e in a)a.hasOwnProperty(e)&&(this[e]=a[e]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},p=n.WordArray=o.extend({init:function(a,e){a=this.words=a||[],this.sigBytes=null!=e?e:4*a.length},toString:function(a){return(a||c).stringify(this)},concat:function(a){var e=this.words,q=a.words,t=this.sigBytes;if(a=a.sigBytes,this.clamp(),t%4)for(var b=0;b<a;b++)e[t+b>>>2]|=(q[b>>>2]>>>24-b%4*8&255)<<24-(t+b)%4*8;else if(65535<q.length)for(b=0;b<a;b+=4)e[t+b>>>2]=q[b>>>2];else e.push.apply(e,q);return this.sigBytes+=a,this},clamp:function(){var a=this.words,e=this.sigBytes;a[e>>>2]&=4294967295<<32-e%4*8,a.length=g.ceil(e/4)},clone:function(){var a=o.clone.call(this);return a.words=this.words.slice(0),a},random:function(a){for(var e=[],b=0;b<a;b+=4)e.push(4294967296*g.random()|0);return new p.init(e,a)}}),b=t.enc={},c=b.Hex={stringify:function(a){var e=a.words;a=a.sigBytes;for(var b=[],t=0;t<a;t++){var n=e[t>>>2]>>>24-t%4*8&255;b.push((n>>>4).toString(16)),b.push((15&n).toString(16))}return b.join("")},parse:function(a){for(var e=a.length,b=[],t=0;t<e;t+=2)b[t>>>3]|=parseInt(a.substr(t,2),16)<<24-t%8*4;return new p.init(b,e/2)}},l=b.Latin1={stringify:function(a){var e=a.words;a=a.sigBytes;for(var b=[],t=0;t<a;t++)b.push(String.fromCharCode(e[t>>>2]>>>24-t%4*8&255));return b.join("")},parse:function(a){for(var e=a.length,b=[],t=0;t<e;t++)b[t>>>2]|=(255&a.charCodeAt(t))<<24-t%4*8;return new p.init(b,e)}},d=b.Utf8={stringify:function(a){try{return decodeURIComponent(escape(l.stringify(a)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(a){return l.parse(unescape(encodeURIComponent(a)))}},f=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=d.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(a){var e=this._data,b=e.words,t=e.sigBytes,n=this.blockSize,r=t/(4*n);if(a=(r=a?g.ceil(r):g.max((0|r)-this._minBufferSize,0))*n,t=g.min(4*a,t),a){for(var o=0;o<a;o+=n)this._doProcessBlock(b,o);o=b.splice(0,a),e.sigBytes-=t}return new p.init(o,t)},clone:function(){var a=o.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});n.Hasher=f.extend({cfg:o.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,e){return new a.init(e).finalize(b)}},_createHmacHelper:function(a){return function(b,e){return new s.HMAC.init(a,e).finalize(b)}}});var s=t.algo={};return t}(Math);r=(l=(g=h).lib).WordArray,o=l.Hasher,c=[],l=g.algo.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var b=this._hash.words,n=b[0],r=b[1],o=b[2],g=b[3],l=b[4],a=0;80>a;a++){if(16>a)c[a]=0|e[t+a];else{var d=c[a-3]^c[a-8]^c[a-14]^c[a-16];c[a]=d<<1|d>>>31}d=(n<<5|n>>>27)+l+c[a],d=20>a?d+(1518500249+(r&o|~r&g)):40>a?d+(1859775393+(r^o^g)):60>a?d+((r&o|r&g|o&g)-1894007588):d+((r^o^g)-899497514),l=g,g=o,o=r<<30|r>>>2,r=n,n=d}b[0]=b[0]+n|0,b[1]=b[1]+r|0,b[2]=b[2]+o|0,b[3]=b[3]+g|0,b[4]=b[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,b=8*this._nDataBytes,g=8*e.sigBytes;return t[g>>>5]|=128<<24-g%32,t[14+(g+64>>>9<<4)]=Math.floor(b/4294967296),t[15+(g+64>>>9<<4)]=b,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),g.SHA1=o._createHelper(l),g.HmacSHA1=o._createHmacHelper(l),function(){var g=h,e=g.enc.Utf8;g.algo.HMAC=g.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var g=t.blockSize,r=4*g;n.sigBytes>r&&(n=t.finalize(n)),n.clamp();for(var p=this._oKey=n.clone(),b=this._iKey=n.clone(),o=p.words,c=b.words,l=0;l<g;l++)o[l]^=1549556828,c[l]^=909522486;p.sigBytes=b.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),f=(d=h).lib.WordArray,d.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,map=this._map;e.clamp();for(var r=[],i=0;i<n;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<n;c++)r.push(map.charAt(o>>>6*(3-c)&63));var l=map.charAt(64);if(l)for(;r.length%4;)r.push(l);return r.join("")},parse:function(e){var t=e.length,map=this._map,n=map.charAt(64);if(n){var r=e.indexOf(n);-1!=r&&(t=r)}for(var o=[],c=0,i=0;i<t;i++)if(i%4){var l=map.indexOf(e.charAt(i-1))<<i%4*2,d=map.indexOf(e.charAt(i))>>>6-i%4*2;o[c>>>2]|=(l|d)<<24-c%4*8,c++}return f.create(o,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.exports=h},804:function(e,t,n){var r=n(805).DOMParser,o=function(){this.version="1.3.5";var e={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},t=new RegExp(/(?!xmlns)^.*:/);new RegExp(/^\s+|\s+$/g);return this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,t){if(e){var n=this.stringToXML(e);return n.getElementsByTagName("parsererror").length?null:this.parseXML(n,t)}return null},this.parseXML=function(n,r){for(var c in r)e[c]=r[c];var l={},d=0,f="";if(n.childNodes.length)for(var h,m,y,v=0;v<n.childNodes.length;v++)4===(h=n.childNodes.item(v)).nodeType?e.mergeCDATA&&(f+=h.nodeValue):3===h.nodeType?f+=h.nodeValue:1===h.nodeType&&(0===d&&(l={}),m=e.stripElemPrefix?h.nodeName.replace(t,""):h.nodeName,y=o.parseXML(h),l.hasOwnProperty(m)?(l[m].constructor!==Array&&(l[m]=[l[m]]),l[m].push(y)):(l[m]=y,d++));return Object.keys(l).length||(l=f||""),l},this.xmlToString=function(e){try{return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}catch(e){return null}},this.stringToXML=function(e){try{var t=null;return window.DOMParser?t=(new r).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t)}catch(e){return null}},this}.call({});e.exports=function(e){return o.parseString(e)}},805:function(e,t,n){function r(e){this.options=e||{locator:{}}}function o(){this.cdata=!1}function c(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function l(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function d(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function f(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(source,e){var t=this.options,n=new h,r=t.domBuilder||new o,c=t.errorHandler,d=t.locator,f=t.xmlns||{},m={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return d&&r.setDocumentLocator(d),n.errorHandler=function(e,t,n){if(!e){if(t instanceof o)return t;e=t}var r={},c=e instanceof Function;function d(t){var o=e[t];!o&&c&&(o=2==e.length?function(n){e(t,n)}:e),r[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+l(n))}||function(){}}return n=n||{},d("warning"),d("error"),d("fatalError"),r}(c,r,d),n.domBuilder=t.domBuilder||r,/\/x?html?$/.test(e)&&(m.nbsp=" ",m.copy="©",f[""]="http://www.w3.org/1999/xhtml"),f.xml=f.xml||"http://www.w3.org/XML/1998/namespace",source?n.parse(source,f,m):n.errorHandler.error("invalid doc source"),r.doc},o.prototype={startDocument:function(){this.doc=(new m).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var o=this.doc,l=o.createElementNS(e,n||t),d=r.length;f(this,l),this.currentElement=l,this.locator&&c(this.locator,l);for(var i=0;i<d;i++){e=r.getURI(i);var h=r.getValue(i),m=(n=r.getQName(i),o.createAttributeNS(e,n));this.locator&&c(r.getLocator(i),m),m.value=m.nodeValue=h,l.setAttributeNode(m)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,data){var ins=this.doc.createProcessingInstruction(e,data);this.locator&&c(this.locator,ins),f(this,ins)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=d.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&c(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=d.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&c(this.locator,r),f(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var dt=r.createDocumentType(e,t,n);this.locator&&c(this.locator,dt),f(this,dt)}},warning:function(e){console.warn("[xmldom warning]\t"+e,l(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,l(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,l(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){o.prototype[e]=function(){return null}}));var h=n(806).XMLReader,m=t.DOMImplementation=n(795).DOMImplementation;t.XMLSerializer=n(795).XMLSerializer,t.DOMParser=r},806:function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$");function c(){}function l(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function d(source,e,t,n,r,o){for(var c,p=++e,s=0;;){var l=source.charAt(p);switch(l){case"=":if(1===s)c=source.slice(e,p),s=3;else{if(2!==s)throw new Error("attribute equal must after attrName");s=3}break;case"'":case'"':if(3===s||1===s){if(1===s&&(o.warning('attribute value must after "="'),c=source.slice(e,p)),e=p+1,!((p=source.indexOf(l,e))>0))throw new Error("attribute value no end '"+l+"' match");d=source.slice(e,p).replace(/&#?\w+;/g,r),t.add(c,d,e-1),s=5}else{if(4!=s)throw new Error('attribute value must after "="');d=source.slice(e,p).replace(/&#?\w+;/g,r),t.add(c,d,e),o.warning('attribute "'+c+'" missed start quot('+l+")!!"),e=p+1,s=5}break;case"/":switch(s){case 0:t.setTagName(source.slice(e,p));case 5:case 6:case 7:s=7,t.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==s&&t.setTagName(source.slice(e,p)),p;case">":switch(s){case 0:t.setTagName(source.slice(e,p));case 5:case 6:case 7:break;case 4:case 1:"/"===(d=source.slice(e,p)).slice(-1)&&(t.closed=!0,d=d.slice(0,-1));case 2:2===s&&(d=c),4==s?(o.warning('attribute "'+d+'" missed quot(")!!'),t.add(c,d.replace(/&#?\w+;/g,r),e)):("http://www.w3.org/1999/xhtml"===n[""]&&d.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),t.add(d,d,e));break;case 3:throw new Error("attribute value missed!!")}return p;case"":l=" ";default:if(l<=" ")switch(s){case 0:t.setTagName(source.slice(e,p)),s=6;break;case 1:c=source.slice(e,p),s=2;break;case 4:var d=source.slice(e,p).replace(/&#?\w+;/g,r);o.warning('attribute "'+d+'" missed quot(")!!'),t.add(c,d,e);case 5:s=6}else switch(s){case 2:t.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&c.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+c+'" missed value!! "'+c+'" instead2!!'),t.add(c,c,e),e=p,s=1;break;case 5:o.warning('attribute space is required"'+c+'"!!');case 6:s=1,e=p;break;case 3:s=4,e=p;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}p++}}function f(e,t,n){for(var r=e.tagName,o=null,i=e.length;i--;){var a=e[i],c=a.qName,l=a.value;if((m=c.indexOf(":"))>0)var d=a.prefix=c.slice(0,m),f=c.slice(m+1),h="xmlns"===d&&f;else f=c,d=null,h="xmlns"===c&&"";a.localName=f,!1!==h&&(null==o&&(o={},y(n,n={})),n[h]=o[h]=l,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,l))}for(i=e.length;i--;){(d=(a=e[i]).prefix)&&("xml"===d&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==d&&(a.uri=n[d||""]))}var m;(m=r.indexOf(":"))>0?(d=e.prefix=r.slice(0,m),f=e.localName=r.slice(m+1)):(d=null,f=e.localName=r);var v=e.uri=n[d||""];if(t.startElement(v,f,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=o,!0;if(t.endElement(v,f,r),o)for(d in o)t.endPrefixMapping(d)}function h(source,e,t,n,r){if(/^(?:script|textarea)$/i.test(t)){var o=source.indexOf("</"+t+">",e),text=source.substring(e+1,o);if(/[&<]/.test(text))return/^script$/i.test(t)?(r.characters(text,0,text.length),o):(text=text.replace(/&#?\w+;/g,n),r.characters(text,0,text.length),o)}return e+1}function m(source,e,t,n){var r=n[t];return null==r&&((r=source.lastIndexOf("</"+t+">"))<e&&(r=source.lastIndexOf("</"+t)),n[t]=r),r<e}function y(source,e){for(var t in source)e[t]=source[t]}function v(source,e,t,n){switch(source.charAt(e+2)){case"-":return"-"===source.charAt(e+3)?(r=source.indexOf("--\x3e",e+4))>e?(t.comment(source,e+4,r-e-4),r+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==source.substr(e+3,6)){var r=source.indexOf("]]>",e+9);return t.startCDATA(),t.characters(source,e+9,r-e-9),t.endCDATA(),r+3}var o=function(source,e){var t,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=e,r.exec(source);for(;t=r.exec(source);)if(n.push(t),t[1])return n}(source,e),c=o.length;if(c>1&&/!doctype/i.test(o[0][0])){var l=o[1][0],d=c>3&&/^public$/i.test(o[2][0])&&o[3][0],f=c>4&&o[4][0],h=o[c-1];return t.startDTD(l,d&&d.replace(/^(['"])(.*?)\1$/,"$2"),f&&f.replace(/^(['"])(.*?)\1$/,"$2")),t.endDTD(),h.index+h[0].length}}return-1}function C(source,e,t){var n=source.indexOf("?>",e);if(n){var r=source.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return t.processingInstruction(r[1],r[2]),n+2}return-1}return-1}function S(source){}function k(e,t){return e.__proto__=t,e}c.prototype={parse:function(source,e,t){var n=this.domBuilder;n.startDocument(),y(e,e={}),function(source,e,t,n,r){function o(a){var e=a.slice(1,-1);return e in t?t[e]:"#"===e.charAt(0)?function(code){if(code>65535){var e=55296+((code-=65536)>>10),t=56320+(1023&code);return String.fromCharCode(e,t)}return String.fromCharCode(code)}(parseInt(e.substr(1).replace("x","0x"))):(r.error("entity not found:"+a),a)}function c(e){if(e>E){var t=source.substring(E,e).replace(/&#?\w+;/g,o);T&&y(E),n.characters(t,0,e-E),E=e}}function y(p,e){for(;p>=x&&(e=w.exec(source));)k=e.index,x=k+e[0].length,T.lineNumber++;T.columnNumber=p-k+1}var k=0,x=0,w=/.*(?:\r\n?|\n)|.*$/g,T=n.locator,_=[{currentNSMap:e}],R={},E=0;for(;;){try{var A=source.indexOf("<",E);if(A<0){if(!source.substr(E).match(/^\s*$/)){var N=n.doc,text=N.createTextNode(source.substr(E));N.appendChild(text),n.currentElement=text}return}switch(A>E&&c(A),source.charAt(A+1)){case"/":var I=source.indexOf(">",A+3),B=source.substring(A+2,I),D=_.pop();I<0?(B=source.substring(A+2).replace(/[\s<].*/,""),r.error("end tag name: "+B+" is not complete:"+D.tagName),I=A+1+B.length):B.match(/\s</)&&(B=B.replace(/[\s<].*/,""),r.error("end tag name: "+B+" maybe not complete"),I=A+1+B.length);var P=D.localNSMap,O=D.tagName==B;if(O||D.tagName&&D.tagName.toLowerCase()==B.toLowerCase()){if(n.endElement(D.uri,D.localName,B),P)for(var L in P)n.endPrefixMapping(L);O||r.fatalError("end tag name: "+B+" is not match the current start tagName:"+D.tagName)}else _.push(D);I++;break;case"?":T&&y(A),I=C(source,A,n);break;case"!":T&&y(A),I=v(source,A,n,r);break;default:T&&y(A);var j=new S,M=_[_.length-1].currentNSMap,U=(I=d(source,A,j,M,o,r),j.length);if(!j.closed&&m(source,I,j.tagName,R)&&(j.closed=!0,t.nbsp||r.warning("unclosed xml attribute")),T&&U){for(var H=l(T,{}),i=0;i<U;i++){var a=j[i];y(a.offset),a.locator=l(T,{})}n.locator=H,f(j,n,M)&&_.push(j),n.locator=T}else f(j,n,M)&&_.push(j);"http://www.w3.org/1999/xhtml"!==j.uri||j.closed?I++:I=h(source,I,j.tagName,o,n)}}catch(e){r.error("element parse error: "+e),I=-1}I>E?E=I:c(Math.max(A,E)+1)}}(source,e,t,n,this.errorHandler),n.endDocument()}},S.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!o.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}},k({},k.prototype)instanceof k||(k=function(e,t){function p(){}for(t in p.prototype=t,p=new p,e)p[t]=e[t];return p}),t.XMLReader=c},807:function(e,t){var n=new RegExp("^([^a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�])|^((x|X)(m|M)(l|L))|([^a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�-.0-9·̀-ͯ‿⁀])","g"),r=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,o=function(e){var t=[];if(e instanceof Object)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},c=function(e,t){var c=function(e,content,r,o,c){var l=void 0!==t.indent?t.indent:"\t",d=t.prettyPrint?"\n"+new Array(o).join(l):"";t.removeIllegalNameCharacters&&(e=e.replace(n,"_"));var f=[d,"<",e,r||""];return content&&content.length>0?(f.push(">"),f.push(content),c&&f.push(d),f.push("</"),f.push(e),f.push(">")):f.push("/>"),f.join("")};return function e(n,l,d){var f=typeof n;switch((Array.isArray?Array.isArray(n):n instanceof Array)?f="array":n instanceof Date&&(f="date"),f){case"array":var h=[];return n.map((function(t){h.push(e(t,1,d+1))})),t.prettyPrint&&h.push("\n"),h.join("");case"date":return n.toJSON?n.toJSON():n+"";case"object":var m=[];for(var y in n)if(n.hasOwnProperty(y))if(n[y]instanceof Array)for(var v=0;v<n[y].length;v++)n[y].hasOwnProperty(v)&&m.push(c(y,e(n[y][v],0,d+1),null,d+1,o(n[y][v]).length));else m.push(c(y,e(n[y],0,d+1),null,d+1));return t.prettyPrint&&m.length>0&&m.push("\n"),m.join("");case"function":return n();default:return t.escape?(""+n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(r,""):""+n}}(e,0,0)},l=function(e){var t=['<?xml version="1.0" encoding="UTF-8"'];return e&&t.push(' standalone="yes"'),t.push("?>"),t.join("")};e.exports=function(e,t){if(t||(t={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),"string"==typeof e)try{e=JSON.parse(e.toString())}catch(e){return!1}var n="",r="";return t&&("object"==typeof t?(t.xmlHeader&&(n=l(!!t.xmlHeader.standalone)),void 0!==t.docType&&(r="<!DOCTYPE "+t.docType+">")):n=l()),[n,(t=t||{}).prettyPrint&&r?"\n":"",r,c(e,t)].join("").replace(/\n{2,}/g,"\n").replace(/\s+$/g,"")}},808:function(e,t,n){var r=n(793),o={};e.exports.transferToTaskMethod=function(e,t){o[t]=e[t],e[t]=function(e,n){e.SkipTask?o[t].call(this,e,n):this._addTask(t,e,n)}},e.exports.init=function(e){var t=[],n={},c=0,l=0,d=function(e){var t={id:e.id,Bucket:e.Bucket,Region:e.Region,Key:e.Key,FilePath:e.FilePath,state:e.state,loaded:e.loaded,size:e.size,speed:e.speed,percent:e.percent,hashPercent:e.hashPercent,error:e.error};return e.FilePath&&(t.FilePath=e.FilePath),t},f=function(){e.emit("task-list-update",{list:r.map(t,d)}),e.emit("list-update",{list:r.map(t,d)})},h=function(){if(!(t.length<=e.options.UploadQueueSize)){for(var i=0;i<l&&i<t.length&&t.length>e.options.UploadQueueSize;){var r="waiting"===t[i].state||"checking"===t[i].state||"uploading"===t[i].state;t[i]&&r?i++:(n[t[i].id]&&delete n[t[i].id],t.splice(i,1),l--)}f()}},m=function(){if(l<t.length&&c<e.options.FileParallelLimit){var n=t[l];if(l++,"waiting"===n.state){c++,n.state="checking",n.params.onTaskStart&&n.params.onTaskStart(d(n)),!n.params.UploadData&&(n.params.UploadData={});var y=r.formatParams(n.api,n.params);o[n.api].call(e,y,(function(t,data){e._isRunningTask(n.id)&&("checking"!==n.state&&"uploading"!==n.state||(n.state=t?"error":"success",t&&(n.error=t),c--,f(),m(e),n.callback&&n.callback(t,data),"success"===n.state&&(n.params&&(delete n.params.UploadData,delete n.params.Body,delete n.params),delete n.callback)),h())})),f()}m(e)}},y=function(t,r){var o=n[t];if(o){var l=o&&"waiting"===o.state,d=o&&("checking"===o.state||"uploading"===o.state);if("canceled"===r&&"canceled"!==o.state||"paused"===r&&l||"paused"===r&&d){if("paused"===r&&o.params.Body&&"function"==typeof o.params.Body.pipe)return void console.error("stream not support pause");o.state=r,e.emit("inner-kill-task",{TaskId:t,toState:r}),f(),d&&(c--,m(e)),"canceled"===r&&(o.params&&(delete o.params.UploadData,delete o.params.Body,delete o.params),delete o.callback)}h()}};e._addTasks=function(t){r.each(t,(function(t){e._addTask(t.api,t.params,t.callback,!0)})),f()};var v=!0;e._addTask=function(o,c,l,d){c=r.formatParams(o,c);var y=r.uuid();c.TaskId=y,c.onTaskReady&&c.onTaskReady(y),c.TaskReady&&(c.TaskReady(y),v&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),v=!1);var C={params:c,callback:l,api:o,index:t.length,id:y,Bucket:c.Bucket,Region:c.Region,Key:c.Key,FilePath:c.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null},S=c.onHashProgress;c.onHashProgress=function(t){e._isRunningTask(C.id)&&(C.hashPercent=t.percent,S&&S(t),f())};var k=c.onProgress;return c.onProgress=function(t){e._isRunningTask(C.id)&&("checking"===C.state&&(C.state="uploading"),C.loaded=t.loaded,C.speed=t.speed,C.percent=t.percent,k&&k(t),f())},r.getFileSize(o,c,(function(r,o){r?l(r):(n[y]=C,t.push(C),C.size=o,!d&&f(),m(e),h())})),y},e._isRunningTask=function(e){var t=n[e];return!(!t||"checking"!==t.state&&"uploading"!==t.state)},e.getTaskList=function(){return r.map(t,d)},e.cancelTask=function(e){y(e,"canceled")},e.pauseTask=function(e){y(e,"paused")},e.restartTask=function(e){var t=n[e];!t||"paused"!==t.state&&"error"!==t.state||(t.state="waiting",f(),l=Math.min(l,t.index),m())},e.isUploadRunning=function(){return c||l<t.length}}},809:function(e,t,n){var r=n(810),o=n(793);function c(e){var t={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},n={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},r=e.AccessControlList.Grant;r&&(r=o.isArray(r)?r:[r]);var c={READ:0,WRITE:0,FULL_CONTROL:0};return r.length&&o.each(r,(function(r){"qcs::cam::anyone:anyone"===r.Grantee.ID||"http://cam.qcloud.com/groups/global/AllUsers"===r.Grantee.URI?c[r.Permission]=1:r.Grantee.ID!==e.Owner.ID&&t[n[r.Permission]].push('id="'+r.Grantee.ID+'"')})),c.FULL_CONTROL||c.WRITE&&c.READ?t.ACL="public-read-write":c.READ?t.ACL="public-read":t.ACL="private",o.each(n,(function(e){t[e]=l(t[e].join(","))})),t}function l(e){var i,t,n=e.split(","),r={};for(i=0;i<n.length;)r[t=n[i].trim()]?n.splice(i,1):(r[t]=!0,n[i]=t,i++);return n.join(",")}function d(e){var t=e.bucket,n=t.substr(0,t.lastIndexOf("-")),r=t.substr(t.lastIndexOf("-")+1),c=e.domain,l=e.region,object=e.object,d=e.protocol||(o.isBrowser&&"http:"===location.protocol?"http:":"https:");c||(c=["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(l)>-1?"{Region}.myqcloud.com":"cos.{Region}.myqcloud.com",e.ForcePathStyle||(c="{Bucket}."+c)),c=(c=c.replace(/\{\{AppId\}\}/gi,r).replace(/\{\{Bucket\}\}/gi,n).replace(/\{\{Region\}\}/gi,l).replace(/\{\{.*?\}\}/gi,"")).replace(/\{AppId\}/gi,r).replace(/\{BucketName\}/gi,n).replace(/\{Bucket\}/gi,t).replace(/\{Region\}/gi,l).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(c)||(c=d+"//"+c),"/"===c.slice(-1)&&(c=c.slice(0,-1));var f=c;return e.ForcePathStyle&&(f+="/"+t),f+="/",object&&(f+=o.camSafeUrlEncode(object).replace(/%2F/g,"/")),e.isLocation&&(f=f.replace(/^https?:\/\//,"")),f}function f(e,t){var n=o.clone(e.Headers);delete n["Content-Type"],delete n["Cache-Control"],o.each(n,(function(e,t){""===e&&delete n[t]}));var r=function(e){var n=!1,r=e.Authorization;if(r)if(r.indexOf(" ")>-1)n=!1;else if(r.indexOf("q-sign-algorithm=")>-1&&r.indexOf("q-ak=")>-1&&r.indexOf("q-sign-time=")>-1&&r.indexOf("q-key-time=")>-1&&r.indexOf("q-url-param-list=")>-1)n=!0;else try{(r=atob(r)).indexOf("a=")>-1&&r.indexOf("k=")>-1&&r.indexOf("t=")>-1&&r.indexOf("r=")>-1&&r.indexOf("b=")>-1&&(n=!0)}catch(e){}n?t&&t(null,e):t&&t("authorization error")},c=this,l=e.Bucket||"",d=e.Region||"",f=e.Key||"";c.options.ForcePathStyle&&l&&(f=l+"/"+f);var h="/"+f,m={},y=e.Scope;if(!y){var v=e.Action||"",C=e.ResourceKey||e.Key||"";y=e.Scope||[{action:v,bucket:l,region:d,prefix:C}]}var S=o.md5(JSON.stringify(y));c._StsCache=c._StsCache||[],function(){var i,e;for(i=c._StsCache.length-1;i>=0;i--){e=c._StsCache[i];var t=Math.round(o.getSkewTime(c.options.SystemClockOffset)/1e3)+30;if(e.StartTime&&t<e.StartTime||t>=e.ExpiredTime)c._StsCache.splice(i,1);else if(!e.ScopeLimit||e.ScopeLimit&&e.ScopeKey===S){m=e;break}}}();var k,x=function(){var t={Authorization:o.getAuth({SecretId:m.TmpSecretId,SecretKey:m.TmpSecretKey,Method:e.Method,Pathname:h,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:c.options.UseRawKey,SystemClockOffset:c.options.SystemClockOffset}),XCosSecurityToken:m.XCosSecurityToken||"",Token:m.Token||"",ClientIP:m.ClientIP||"",ClientUA:m.ClientUA||""};r(t)};if(m.ExpiredTime&&m.ExpiredTime-o.getSkewTime(c.options.SystemClockOffset)/1e3>60)x();else if(c.options.getAuthorization)c.options.getAuthorization.call(c,{Bucket:l,Region:d,Method:e.Method,Key:f,Pathname:h,Query:e.Query,Headers:n,Scope:y},(function(e){"string"==typeof e&&(e={Authorization:e}),e.TmpSecretId&&e.TmpSecretKey&&e.XCosSecurityToken&&e.ExpiredTime?((m=e||{}).Scope=y,m.ScopeKey=S,c._StsCache.push(m),x()):r(e)}));else{if(!c.options.getSTS)return k={Authorization:o.getAuth({SecretId:e.SecretId||c.options.SecretId,SecretKey:e.SecretKey||c.options.SecretKey,Method:e.Method,Pathname:h,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:c.options.UseRawKey,SystemClockOffset:c.options.SystemClockOffset}),XCosSecurityToken:c.options.XCosSecurityToken},r(k),k;c.options.getSTS.call(c,{Bucket:l,Region:d},(function(data){(m=data||{}).Scope=y,m.ScopeKey=S,m.TmpSecretId=m.SecretId,m.TmpSecretKey=m.SecretKey,c._StsCache.push(m),x()}))}return""}function h(e){var t=!1,n=!1,r=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var c=e.error.Code,l=e.error.Message;("RequestTimeTooSkewed"===c||"AccessDenied"===c&&"Request has expired"===l)&&(n=!0)}catch(e){}if(e)if(n&&r){var d=Date.parse(r);this.options.CorrectClockSkew&&Math.abs(o.getSkewTime(this.options.SystemClockOffset)-d)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=d-Date.now(),t=!0)}else 5===Math.round(e.statusCode/100)&&(t=!0);return t}function m(e,t){var n=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=o.clearKey(e.qs),e.headers&&(e.headers=o.clearKey(e.headers)),e.qs&&(e.qs=o.clearKey(e.qs));var r=o.clone(e.qs);e.action&&(r[e.action]="");var c=function(o){var l=n.options.SystemClockOffset;f.call(n,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:r,Headers:e.headers,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope},(function(r,d){r?t(r):(e.AuthData=d,y.call(n,e,(function(r,data){r&&o<2&&(l!==n.options.SystemClockOffset||h.call(n,r))?(e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,delete e.headers["x-cos-security-token"]),c(o+1)):t(r,data)})))}))};c(0)}function y(e,t){var n=this,c=e.TaskId;if(!c||n._isRunningTask(c)){var l=e.Bucket,f=e.Region,object=e.Key,h=e.method||"GET",m=e.url,body=e.body,y=e.json,v=e.rawBody;m=m||d({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:l,region:f,object:object}),e.action&&(m=m+"?"+e.action);var C={method:h,url:m,headers:e.headers,qs:e.qs,body:body,json:y};if(C.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(C.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(C.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(C.headers.clientUA=e.AuthData.ClientUA),e.AuthData.XCosSecurityToken&&(C.headers["x-cos-security-token"]=e.AuthData.XCosSecurityToken),C.headers&&(C.headers=o.clearKey(C.headers)),C=o.clearKey(C),e.onProgress&&"function"==typeof e.onProgress){var S=body&&(body.size||body.length)||0;C.onProgress=function(t){if(!c||n._isRunningTask(c)){var r=t?t.loaded:0;e.onProgress({loaded:r,total:S})}}}this.options.Timeout&&(C.timeout=this.options.Timeout),n.emit("before-send",C);var k=r(C,(function(e,r,body){if("abort"!==e){var l,d=function(e,data){if(c&&n.off("inner-kill-task",x),!l){l=!0;var d={};r&&r.statusCode&&(d.statusCode=r.statusCode),r&&r.headers&&(d.headers=r.headers),e?(e=o.extend(e||{},d),t(e,null)):(data=o.extend(data||{},d),t(null,data)),k=null}};if(e)d({error:e});else{var f;try{f=body&&body.indexOf("<")>-1&&body.indexOf(">")>-1&&o.xml2json(body)||{}}catch(e){f=body||{}}var h=r.statusCode;2===Math.floor(h/100)?(v&&((f={}).body=body),f.Error?d({error:f.Error}):d(null,f)):d({error:f.Error||f})}}})),x=function(data){data.TaskId===c&&(k&&k.abort&&k.abort(),n.off("inner-kill-task",x))};c&&n.on("inner-kill-task",x)}}var v={getBucket:function(e,t){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n.marker=e.Marker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,m.call(this,{Action:"name/cos:GetBucket",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n},(function(e,data){if(e)return t(e);var n=data.ListBucketResult||{},r=n.Contents||[],c=n.CommonPrefixes||[];r=o.isArray(r)?r:[r],c=o.isArray(c)?c:[c];var l=o.clone(n);o.extend(l,{Contents:r,CommonPrefixes:c,statusCode:data.statusCode,headers:data.headers}),t(null,l)}))},headBucket:function(e,t){m.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD"},(function(e,data){t(e,data)}))},deleteBucket:function(e,t){m.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},getBucketAcl:function(e,t){m.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl"},(function(e,data){if(e)return t(e);var n=data.AccessControlPolicy||{},r=n.Owner||{},l=n.AccessControlList.Grant||[];l=o.isArray(l)?l:[l];var d=c(n);data.headers&&data.headers["x-cos-acl"]&&(d.ACL=data.headers["x-cos-acl"]),d=o.extend(d,{Owner:r,Grants:l,statusCode:data.statusCode,headers:data.headers}),t(null,d)}))},putBucketAcl:function(e,t){var n=e.Headers,r="";if(e.AccessControlPolicy){var c=o.clone(e.AccessControlPolicy||{}),d=c.Grants||c.Grant;d=o.isArray(d)?d:[d],delete c.Grant,delete c.Grants,c.AccessControlList={Grant:d},r=o.json2xml({AccessControlPolicy:c}),n["Content-Type"]="application/xml",n["Content-MD5"]=o.binaryBase64(o.md5(r))}o.each(n,(function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=l(n[t]))})),m.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:n,action:"acl",body:r},(function(e,data){if(e)return t(e);t(null,{statusCode:data.statusCode,headers:data.headers})}))},getBucketCors:function(e,t){m.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},(function(e,data){if(e)if(404===e.statusCode&&e.error&&"NoSuchCORSConfiguration"===e.error.Code){var n={CORSRules:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var r=data.CORSConfiguration||{},c=r.CORSRules||r.CORSRule||[];c=o.clone(o.isArray(c)?c:[c]),o.each(c,(function(e){o.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(t,n){var r=t+"s",c=e[r]||e[t]||[];delete e[t],e[r]=o.isArray(c)?c:[c]}))})),t(null,{CORSRules:c,statusCode:data.statusCode,headers:data.headers})}}))},putBucketCors:function(e,t){var n=(e.CORSConfiguration||{}).CORSRules||e.CORSRules||[];n=o.clone(o.isArray(n)?n:[n]),o.each(n,(function(e){o.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(t,n){var r=t+"s",c=e[r]||e[t]||[];delete e[r],e[t]=o.isArray(c)?c:[c]}))}));var r=o.json2xml({CORSConfiguration:{CORSRule:n}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=o.binaryBase64(o.md5(r)),m.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"cors",headers:c},(function(e,data){if(e)return t(e);t(null,{statusCode:data.statusCode,headers:data.headers})}))},deleteBucketCors:function(e,t){m.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode||e.statusCode,headers:data.headers})}))},getBucketLocation:function(e,t){m.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location"},(function(e,data){if(e)return t(e);t(null,data)}))},putBucketTagging:function(e,t){var n=e.Tagging||{},r=n.TagSet||n.Tags||e.Tags||[];r=o.clone(o.isArray(r)?r:[r]);var c=o.json2xml({Tagging:{TagSet:{Tag:r}}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=o.binaryBase64(o.md5(c)),m.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:c,action:"tagging",headers:l},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},getBucketTagging:function(e,t){m.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},(function(e,data){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var n={Tags:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else{var r=[];try{r=data.Tagging.TagSet.Tag||[]}catch(e){}r=o.clone(o.isArray(r)?r:[r]),t(null,{Tags:r,statusCode:data.statusCode,headers:data.headers})}}))},deleteBucketTagging:function(e,t){m.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},getBucketPolicy:function(e,t){m.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0},(function(e,data){if(e)return e.statusCode&&403===e.statusCode?t({ErrorStatus:"Access Denied"}):e.statusCode&&405===e.statusCode?t({ErrorStatus:"Method Not Allowed"}):e.statusCode&&404===e.statusCode?t({ErrorStatus:"Policy Not Found"}):t(e);var n={};try{n=JSON.parse(data.body)}catch(e){}t(null,{Policy:n,statusCode:data.statusCode,headers:data.headers})}))},putBucketPolicy:function(e,t){var n=e.Policy,r=n;try{"string"==typeof n?n=JSON.parse(r):r=JSON.stringify(n)}catch(e){t({error:"Policy format error"})}var c=e.Headers;c["Content-Type"]="application/json",c["Content-MD5"]=o.binaryBase64(o.md5(r)),m.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:o.isBrowser?r:n,headers:c,json:!0},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},deleteBucketPolicy:function(e,t){m.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode||e.statusCode,headers:data.headers})}))},getBucketLifecycle:function(e,t){m.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},(function(e,data){if(e)if(404===e.statusCode&&e.error&&"NoSuchLifecycleConfiguration"===e.error.Code){var n={Rules:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var r=[];try{r=data.LifecycleConfiguration.Rule||[]}catch(e){}r=o.clone(o.isArray(r)?r:[r]),t(null,{Rules:r,statusCode:data.statusCode,headers:data.headers})}}))},putBucketLifecycle:function(e,t){var n=(e.LifecycleConfiguration||{}).Rules||[];n=o.clone(n);var r=o.json2xml({LifecycleConfiguration:{Rule:n}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=o.binaryBase64(o.md5(r)),m.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"lifecycle",headers:c},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},deleteBucketLifecycle:function(e,t){m.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},putBucketVersioning:function(e,t){if(e.VersioningConfiguration){var n=e.VersioningConfiguration||{},r=o.json2xml({VersioningConfiguration:n}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=o.binaryBase64(o.md5(r)),m.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"versioning",headers:c},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))}else t({error:"missing param VersioningConfiguration"})},getBucketVersioning:function(e,t){m.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning"},(function(e,data){e||!data.VersioningConfiguration&&(data.VersioningConfiguration={}),t(e,data)}))},putBucketReplication:function(e,t){var n=o.clone(e.ReplicationConfiguration),r=o.json2xml({ReplicationConfiguration:n});r=(r=r.replace(/<(\/?)Rules>/gi,"<$1Rule>")).replace(/<(\/?)Tags>/gi,"<$1Tag>");var c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=o.binaryBase64(o.md5(r)),m.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"replication",headers:c},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},getBucketReplication:function(e,t){m.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},(function(e,data){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"ReplicationConfigurationnotFoundError"!==e.error.Code)t(e);else{var n={ReplicationConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else e||!data.ReplicationConfiguration&&(data.ReplicationConfiguration={}),data.ReplicationConfiguration.Rule&&(data.ReplicationConfiguration.Rules=data.ReplicationConfiguration.Rule,delete data.ReplicationConfiguration.Rule),t(e,data)}))},deleteBucketReplication:function(e,t){m.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},(function(e,data){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:data.statusCode,headers:data.headers})}))},getObject:function(e,t){var n={};n["response-content-type"]=e.ResponseContentType,n["response-content-language"]=e.ResponseContentLanguage,n["response-expires"]=e.ResponseExpires,n["response-cache-control"]=e.ResponseCacheControl,n["response-content-disposition"]=e.ResponseContentDisposition,n["response-content-encoding"]=e.ResponseContentEncoding,m.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,qs:n,rawBody:!0},(function(n,data){if(n){var r=n.statusCode;return e.Headers["If-Modified-Since"]&&r&&304===r?t(null,{NotModified:!0}):t(n)}var c={};c.Body=data.body,data.headers&&data.headers.etag&&(c.ETag=data.headers&&data.headers.etag),o.extend(c,{statusCode:data.statusCode,headers:data.headers}),t(null,c)}))},headObject:function(e,t){m.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},(function(n,data){if(n){var r=n.statusCode;return e.Headers["If-Modified-Since"]&&r&&304===r?t(null,{NotModified:!0,statusCode:r}):t(n)}data.headers&&data.headers.etag&&(data.ETag=data.headers&&data.headers.etag),t(null,data)}))},listObjectVersions:function(e,t){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n["key-marker"]=e.KeyMarker,n["version-id-marker"]=e.VersionIdMarker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,m.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"versions"},(function(e,data){if(e)return t(e);var n=data.ListVersionsResult||{},r=n.DeleteMarker||[];r=o.isArray(r)?r:[r];var c=n.Version||[];c=o.isArray(c)?c:[c];var l=o.clone(n);delete l.DeleteMarker,delete l.Version,o.extend(l,{DeleteMarkers:r,Versions:c,statusCode:data.statusCode,headers:data.headers}),t(null,l)}))},putObject:function(e,t){var n=this,r=e.ContentLength,c=o.throttleOnProgress.call(n,r,e.onProgress),l=e.Headers;!l["Cache-Control"]&&(l["Cache-Control"]="");var f=l["Content-Type"]||e.Body&&e.Body.type;!l["Content-Type"]&&f&&(l["Content-Type"]=f),o.getBodyMd5(n.options.UploadCheckContentMd5,e.Body,(function(l){l&&(e.Headers["Content-MD5"]=o.binaryBase64(l)),void 0!==e.ContentLength&&(e.Headers["Content-Length"]=e.ContentLength),m.call(n,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,body:e.Body,onProgress:c},(function(o,data){if(o)return c(null,!0),t(o);if(c({loaded:r,total:r},!0),data&&data.headers&&data.headers.etag){var l=d({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});return l=l.substr(l.indexOf("://")+3),t(null,{Location:l,ETag:data.headers.etag,statusCode:data.statusCode,headers:data.headers})}t(null,data)}))}))},deleteObject:function(e,t){m.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId},(function(e,data){if(e){var n=e.statusCode;return n&&204===n?t(null,{statusCode:n}):n&&404===n?t(null,{BucketNotFound:!0,statusCode:n}):t(e)}t(null,{statusCode:data.statusCode,headers:data.headers})}))},getObjectAcl:function(e,t){m.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"acl"},(function(e,data){if(e)return t(e);var n=data.AccessControlPolicy||{},r=n.Owner||{},l=n.AccessControlList&&n.AccessControlList.Grant||[];l=o.isArray(l)?l:[l];var d=c(n);data.headers&&data.headers["x-cos-acl"]&&(d.ACL=data.headers["x-cos-acl"]),d=o.extend(d,{Owner:r,Grants:l,statusCode:data.statusCode,headers:data.headers}),t(null,d)}))},putObjectAcl:function(e,t){var n=e.Headers,r="";if(e.AccessControlPolicy){var c=o.clone(e.AccessControlPolicy||{}),d=c.Grants||c.Grant;d=o.isArray(d)?d:[d],delete c.Grant,delete c.Grants,c.AccessControlList={Grant:d},r=o.json2xml({AccessControlPolicy:c}),n["Content-Type"]="application/xml",n["Content-MD5"]=o.binaryBase64(o.md5(r))}o.each(n,(function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=l(n[t]))})),m.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:n,body:r},(function(e,data){if(e)return t(e);t(null,{statusCode:data.statusCode,headers:data.headers})}))},optionsObject:function(e,t){var n=e.Headers;n.Origin=e.Origin,n["Access-Control-Request-Method"]=e.AccessControlRequestMethod,n["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,m.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:n},(function(e,data){if(e)return e.statusCode&&403===e.statusCode?t(null,{OptionsForbidden:!0,statusCode:e.statusCode}):t(e);var n=data.headers||{};t(null,{AccessControlAllowOrigin:n["access-control-allow-origin"],AccessControlAllowMethods:n["access-control-allow-methods"],AccessControlAllowHeaders:n["access-control-allow-headers"],AccessControlExposeHeaders:n["access-control-expose-headers"],AccessControlMaxAge:n["access-control-max-age"],statusCode:data.statusCode,headers:data.headers})}))},putObjectCopy:function(e,t){var n=e.Headers;!n["Cache-Control"]&&(n["Cache-Control"]="");var r=(e.CopySource||"").match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(r){var c=r[1],l=r[3],d=decodeURIComponent(r[4]);m.call(this,{Scope:[{action:"name/cos:GetObject",bucket:c,region:l,prefix:d},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},(function(e,data){if(e)return t(e);var n=o.clone(data.CopyObjectResult||{});o.extend(n,{statusCode:data.statusCode,headers:data.headers}),t(null,n)}))}else t({error:"CopySource format error"})},deleteMultipleObject:function(e,t){var n=e.Objects||[],r=e.Quiet;n=o.isArray(n)?n:[n];var c=o.json2xml({Delete:{Object:n,Quiet:r||!1}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=o.binaryBase64(o.md5(c));var d=o.map(n,(function(t){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:t.Key}}));m.call(this,{Scope:d,method:"POST",Bucket:e.Bucket,Region:e.Region,body:c,action:"delete",headers:l},(function(e,data){if(e)return t(e);var n=data.DeleteResult||{},r=n.Deleted||[],c=n.Error||[];r=o.isArray(r)?r:[r],c=o.isArray(c)?c:[c];var l=o.clone(n);o.extend(l,{Error:c,Deleted:r,statusCode:data.statusCode,headers:data.headers}),t(null,l)}))},restoreObject:function(e,t){var n=e.Headers;if(e.RestoreRequest){var r=e.RestoreRequest||{},c=o.json2xml({RestoreRequest:r});n["Content-Type"]="application/xml",n["Content-MD5"]=o.binaryBase64(o.md5(c)),m.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:c,action:"restore",headers:n},(function(e,data){t(e,data)}))}else t({error:"missing param RestoreRequest"})},uploadPartCopy:function(e,t){var n=(e.CopySource||"").match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(n){var r=n[1],c=n[3],l=decodeURIComponent(n[4]);m.call(this,{Scope:[{action:"name/cos:GetObject",bucket:r,region:c,prefix:l},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers},(function(e,data){if(e)return t(e);var n=o.clone(data.CopyPartResult||{});o.extend(n,{statusCode:data.statusCode,headers:data.headers}),t(null,n)}))}else t({error:"CopySource format error"})},multipartInit:function(e,t){var n,r=e.Headers,c=(navigator&&navigator.userAgent||"").match(/ TBS\/(\d{6}) /);"http:"===location.protocol&&c&&c[1].length<=6&&c[1]<"044429"&&(n=o.json2xml({}),r["Content-MD5"]=o.binaryBase64(o.md5(n)),r["Content-Type"]||(r["Content-Type"]=e.Body&&e.Body.type||"application/octet-stream")),!r["Cache-Control"]&&(r["Cache-Control"]=""),m.call(this,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,body:n},(function(e,data){return e?t(e):(data=o.clone(data||{}))&&data.InitiateMultipartUploadResult?t(null,o.extend(data.InitiateMultipartUploadResult,{statusCode:data.statusCode,headers:data.headers})):void t(null,data)}))},multipartUpload:function(e,t){var n=this;o.getFileSize("multipartUpload",e,(function(){o.getBodyMd5(n.options.UploadCheckContentMd5,e.Body,(function(r){r&&(e.Headers["Content-MD5"]=o.binaryBase64(r)),m.call(n,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null},(function(e,data){if(e)return t(e);data.headers=data.headers||{},t(null,{ETag:data.headers.etag||"",statusCode:data.statusCode,headers:data.headers})}))}))}))},multipartComplete:function(e,t){for(var n=this,r=e.UploadId,c=e.Parts,i=0,l=c.length;i<l;i++)0!==c[i].ETag.indexOf('"')&&(c[i].ETag='"'+c[i].ETag+'"');var f=o.json2xml({CompleteMultipartUpload:{Part:c}}),h=e.Headers;h["Content-Type"]="application/xml",h["Content-MD5"]=o.binaryBase64(o.md5(f)),m.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:r},body:f,headers:h},(function(r,data){if(r)return t(r);var c=d({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),l=data.CompleteMultipartUploadResult||{},f=o.extend(l,{Location:c,statusCode:data.statusCode,headers:data.headers});t(null,f)}))},multipartList:function(e,t){var n={};n.delimiter=e.Delimiter,n["encoding-type"]=e.EncodingType,n.prefix=e.Prefix||"",n["max-uploads"]=e.MaxUploads,n["key-marker"]=e.KeyMarker,n["upload-id-marker"]=e.UploadIdMarker,n=o.clearKey(n),m.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"uploads"},(function(e,data){if(e)return t(e);if(data&&data.ListMultipartUploadsResult){var n=data.ListMultipartUploadsResult.Upload||[],r=data.ListMultipartUploadsResult.CommonPrefixes||[];r=o.isArray(r)?r:[r],n=o.isArray(n)?n:[n],data.ListMultipartUploadsResult.Upload=n,data.ListMultipartUploadsResult.CommonPrefixes=r}var c=o.clone(data.ListMultipartUploadsResult||{});o.extend(c,{statusCode:data.statusCode,headers:data.headers}),t(null,c)}))},multipartListPart:function(e,t){var n={};n.uploadId=e.UploadId,n["encoding-type"]=e.EncodingType,n["max-parts"]=e.MaxParts,n["part-number-marker"]=e.PartNumberMarker,m.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},(function(e,data){if(e)return t(e);var n=data.ListPartsResult||{},r=n.Part||[];r=o.isArray(r)?r:[r],n.Part=r;var c=o.clone(n);o.extend(c,{statusCode:data.statusCode,headers:data.headers}),t(null,c)}))},multipartAbort:function(e,t){var n={};n.uploadId=e.UploadId,m.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},(function(e,data){if(e)return t(e);t(null,{statusCode:data.statusCode,headers:data.headers})}))},getObjectUrl:function(e,t){var n=d({ForcePathStyle:this.options.ForcePathStyle,protocol:e.Protocol||this.options.Protocol,domain:this.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});if(void 0!==e.Sign&&!e.Sign)return t(null,{Url:n}),n;var r=f.call(this,{Action:"PUT"===(e.Method||"").toUpperCase()?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires},(function(e,r){if(t)if(e)t(e);else{var o=n;o+="?"+(r.Authorization.indexOf("q-signature")>-1?r.Authorization:"sign="+encodeURIComponent(r.Authorization)),r.XCosSecurityToken&&(o+="&x-cos-security-token="+r.XCosSecurityToken),r.ClientIP&&(o+="&clientIP="+r.ClientIP),r.ClientUA&&(o+="&clientUA="+r.ClientUA),r.Token&&(o+="&token="+r.Token),setTimeout((function(){t(null,{Url:o})}))}}));return r?n+"?"+r.Authorization+(r.XCosSecurityToken?"&x-cos-security-token="+r.XCosSecurityToken:""):n},getAuth:function(e){return o.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:this.options.UseRawKey,SystemClockOffset:this.options.SystemClockOffset})}};e.exports.init=function(e,t){t.transferToTaskMethod(v,"putObject"),o.each(v,(function(t,n){e.prototype[n]=o.apiWrapper(n,t),function(e,t,n){o.each(["Cors","Acl"],(function(r){if(e.slice(-r.length)===r){var c=e.slice(0,-r.length)+r.toUpperCase(),l=o.apiWrapper(e,t),d=!1;n[c]=function(){!d&&console.warn("warning: cos."+c+" has been deprecated. Please Use cos."+e+" instead."),d=!0,l.apply(this,arguments)}}}))}(n,t,e.prototype)}))}},810:function(e,t,n){var r=n(811),o=function(){var e=[],t=e.slice,n=e.concat,r=e.push,o=e.indexOf,c={},l=c.toString,d=c.hasOwnProperty,f={},h="1.11.1 -css,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var/cssExpand,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-effects,-effects/Tween,-effects/animatedSelector,-effects/support,-dimensions,-offset,-deprecated,-event-alias,-wrap",m=function(e,t){return new m.fn.init(e,t)},y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,C=/-([\da-z])/gi,S=function(e,t){return t.toUpperCase()};function k(e){var t=e.length,n=m.type(e);return"function"!==n&&!m.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}m.fn=m.prototype={jquery:h,constructor:m,selector:"",length:0,toArray:function(){return t.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:t.call(this)},pushStack:function(e){var t=m.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return m.each(this,e,t)},map:function(e){return this.pushStack(m.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(t.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var e=this.length,t=+i+(i<0?e:0);return this.pushStack(t>=0&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:r,sort:e.sort,splice:e.splice},m.extend=m.fn.extend=function(){var e,t,n,r,o,c,l=arguments[0]||{},i=1,d=arguments.length,f=!1;for("boolean"==typeof l&&(f=l,l=arguments[i]||{},i++),"object"==typeof l||m.isFunction(l)||(l={}),i===d&&(l=this,i--);i<d;i++)if(null!=(o=arguments[i]))for(r in o)e=l[r],l!==(n=o[r])&&(f&&n&&(m.isPlainObject(n)||(t=m.isArray(n)))?(t?(t=!1,c=e&&m.isArray(e)?e:[]):c=e&&m.isPlainObject(e)?e:{},l[r]=m.extend(f,c,n)):void 0!==n&&(l[r]=n));return l},m.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===m.type(e)},isArray:Array.isArray||function(e){return"array"===m.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!m.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==m.type(e)||e.nodeType||m.isWindow(e))return!1;try{if(e.constructor&&!d.call(e,"constructor")&&!d.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(f.ownLast)for(t in e)return d.call(e,t);for(t in e);return void 0===t||d.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[l.call(e)]||"object":typeof e},globalEval:function(data){data&&m.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(e){return e.replace(v,"ms-").replace(C,S)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,r=e.length,o=k(e);if(n){if(o)for(;i<r&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(o)for(;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(text){return null==text?"":(text+"").replace(y,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(k(Object(e))?m.merge(n,"string"==typeof e?[e]:e):r.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(o)return o.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,c=!n;i<o;i++)!t(e[i],i)!==c&&r.push(e[i]);return r},map:function(e,t,r){var o,i=0,c=e.length,l=[];if(k(e))for(;i<c;i++)null!=(o=t(e[i],i,r))&&l.push(o);else for(i in e)null!=(o=t(e[i],i,r))&&l.push(o);return n.apply([],l)},guid:1,proxy:function(e,n){var r,o,c;if("string"==typeof n&&(c=e[n],n=e,e=c),m.isFunction(e))return r=t.call(arguments,2),(o=function(){return e.apply(n||this,r.concat(t.call(arguments)))}).guid=e.guid=e.guid||m.guid++,o},now:function(){return+new Date},support:f}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(i,e){c["[object "+e+"]"]=e.toLowerCase()}));var x,w=window.document,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e))||!n[1]&&t)return!t||t.jquery?(t||x).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof m?t[0]:t,m.merge(this,m.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),rsingleTag.test(n[1])&&m.isPlainObject(t))for(n in t)m.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((r=w.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return x.find(e);this.length=1,this[0]=r}return this.context=w,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):m.isFunction(e)?void 0!==x.ready?x.ready(e):e(m):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),m.makeArray(e,this))}).prototype=m.fn,x=m(w);var _,R=/\S+/g,E={};function A(){w.addEventListener?(w.removeEventListener("DOMContentLoaded",N,!1),window.removeEventListener("load",N,!1)):(w.detachEvent("onreadystatechange",N),window.detachEvent("onload",N))}function N(){(w.addEventListener||"load"===event.type||"complete"===w.readyState)&&(A(),m.ready())}m.Callbacks=function(e){e="string"==typeof e?E[e]||function(e){var object=E[e]={};return m.each(e.match(R)||[],(function(e,t){object[t]=!0})),object}(e):m.extend({},e);var t,n,r,o,c,l,d=[],f=!e.once&&[],h=function(data){for(n=e.memory&&data,r=!0,c=l||0,l=0,o=d.length,t=!0;d&&c<o;c++)if(!1===d[c].apply(data[0],data[1])&&e.stopOnFalse){n=!1;break}t=!1,d&&(f?f.length&&h(f.shift()):n?d=[]:y.disable())},y={add:function(){if(d){var r=d.length;!function t(n){m.each(n,(function(n,r){var o=m.type(r);"function"===o?e.unique&&y.has(r)||d.push(r):r&&r.length&&"string"!==o&&t(r)}))}(arguments),t?o=d.length:n&&(l=r,h(n))}return this},remove:function(){return d&&m.each(arguments,(function(e,n){for(var r;(r=m.inArray(n,d,r))>-1;)d.splice(r,1),t&&(r<=o&&o--,r<=c&&c--)})),this},has:function(e){return e?m.inArray(e,d)>-1:!(!d||!d.length)},empty:function(){return d=[],o=0,this},disable:function(){return d=f=n=void 0,this},disabled:function(){return!d},lock:function(){return f=void 0,n||y.disable(),this},locked:function(){return!f},fireWith:function(e,n){return!d||r&&!f||(n=[e,(n=n||[]).slice?n.slice():n],t?f.push(n):h(n)),this},fire:function(){return y.fireWith(this,arguments),this},fired:function(){return!!r}};return y},m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred((function(n){m.each(t,(function(i,t){var c=m.isFunction(e[i])&&e[i];o[t[1]]((function(){var e=c&&c.apply(this,arguments);e&&m.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[t[0]+"With"](this===r?n.promise():this,c?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?m.extend(e,r):r}},o={};return r.pipe=r.then,m.each(t,(function(i,e){var c=e[2],l=e[3];r[e[1]]=c.add,l&&c.add((function(){n=l}),t[1^i][2].disable,t[2][2].lock),o[e[0]]=function(){return o[e[0]+"With"](this===o?r:this,arguments),this},o[e[0]+"With"]=c.fireWith})),r.promise(o),e&&e.call(o,o),o},when:function(e){var n,r,o,i=0,c=t.call(arguments),l=c.length,d=1!==l||e&&m.isFunction(e.promise)?l:0,f=1===d?e:m.Deferred(),h=function(i,e,r){return function(o){e[i]=this,r[i]=arguments.length>1?t.call(arguments):o,r===n?f.notifyWith(e,r):--d||f.resolveWith(e,r)}};if(l>1)for(n=new Array(l),r=new Array(l),o=new Array(l);i<l;i++)c[i]&&m.isFunction(c[i].promise)?c[i].promise().done(h(i,o,c)).fail(f.reject).progress(h(i,r,n)):--d;return d||f.resolveWith(o,c),f.promise()}}),m.fn.ready=function(e){return m.ready.promise().done(e),this},m.extend({isReady:!1,readyWait:1,holdReady:function(e){e?m.readyWait++:m.ready(!0)},ready:function(e){if(!(!0===e?--m.readyWait:m.isReady)){if(!w.body)return setTimeout(m.ready);m.isReady=!0,!0!==e&&--m.readyWait>0||(_.resolveWith(w,[m]),m.fn.triggerHandler&&(m(w).triggerHandler("ready"),m(w).off("ready")))}}}),m.ready.promise=function(e){if(!_)if(_=m.Deferred(),"complete"===w.readyState)setTimeout(m.ready);else if(w.addEventListener)w.addEventListener("DOMContentLoaded",N,!1),window.addEventListener("load",N,!1);else{w.attachEvent("onreadystatechange",N),window.attachEvent("onload",N);var t=!1;try{t=null==window.frameElement&&w.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!m.isReady){try{t.doScroll("left")}catch(t){return setTimeout(e,50)}A(),m.ready()}}()}return _.promise(e)};var i;for(i in m(f))break;f.ownLast="0"!==i,f.inlineBlockNeedsLayout=!1,m((function(){var e,div,body,t;(body=w.getElementsByTagName("body")[0])&&body.style&&(div=w.createElement("div"),(t=w.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(t).appendChild(div),void 0!==div.style.zoom&&(div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",f.inlineBlockNeedsLayout=e=3===div.offsetWidth,e&&(body.style.zoom=1)),body.removeChild(t))})),function(){var div=w.createElement("div");if(null==f.deleteExpando){f.deleteExpando=!0;try{delete div.test}catch(e){f.deleteExpando=!1}}div=null}(),m.acceptData=function(e){var t=m.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var I=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,B=/([A-Z])/g;function D(e,t,data){if(void 0===data&&1===e.nodeType){var n="data-"+t.replace(B,"-$1").toLowerCase();if("string"==typeof(data=e.getAttribute(n))){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:I.test(data)?m.parseJSON(data):data)}catch(e){}m.data(e,t,data)}else data=void 0}return data}function P(e){var t;for(t in e)if(("data"!==t||!m.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function O(t,n,data,r){if(m.acceptData(t)){var o,c,l=m.expando,d=t.nodeType,f=d?m.cache:t,h=d?t[l]:t[l]&&l;if(h&&f[h]&&(r||f[h].data)||void 0!==data||"string"!=typeof n)return h||(h=d?t[l]=e.pop()||m.guid++:l),f[h]||(f[h]=d?{}:{toJSON:m.noop}),"object"!=typeof n&&"function"!=typeof n||(r?f[h]=m.extend(f[h],n):f[h].data=m.extend(f[h].data,n)),c=f[h],r||(c.data||(c.data={}),c=c.data),void 0!==data&&(c[m.camelCase(n)]=data),"string"==typeof n?null==(o=c[n])&&(o=c[m.camelCase(n)]):o=c,o}}function L(e,t,n){if(m.acceptData(e)){var r,i,o=e.nodeType,c=o?m.cache:e,l=o?e[m.expando]:m.expando;if(c[l]){if(t&&(r=n?c[l]:c[l].data)){i=(t=m.isArray(t)?t.concat(m.map(t,m.camelCase)):t in r||(t=m.camelCase(t))in r?[t]:t.split(" ")).length;for(;i--;)delete r[t[i]];if(n?!P(r):!m.isEmptyObject(r))return}(n||(delete c[l].data,P(c[l])))&&(o?m.cleanData([e],!0):f.deleteExpando||c!=c.window?delete c[l]:c[l]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?m.cache[e[m.expando]]:e[m.expando])&&!P(e)},data:function(e,t,data){return O(e,t,data)},removeData:function(e,t){return L(e,t)},_data:function(e,t,data){return O(e,t,data,!0)},_removeData:function(e,t){return L(e,t,!0)}}),m.fn.extend({data:function(e,t){var i,n,data,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(data=m.data(r),1===r.nodeType&&!m._data(r,"parsedAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&D(r,n=m.camelCase(n.slice(5)),data[n]);m._data(r,"parsedAttrs",!0)}return data}return"object"==typeof e?this.each((function(){m.data(this,e)})):arguments.length>1?this.each((function(){m.data(this,e,t)})):r?D(r,e,m.data(r,e)):void 0},removeData:function(e){return this.each((function(){m.removeData(this,e)}))}}),m.extend({queue:function(e,t,data){var n;if(e)return t=(t||"fx")+"queue",n=m._data(e,t),data&&(!n||m.isArray(data)?n=m._data(e,t,m.makeArray(data)):n.push(data)),n||[]},dequeue:function(e,t){t=t||"fx";var n=m.queue(e,t),r=n.length,o=n.shift(),c=m._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete c.stop,o.call(e,(function(){m.dequeue(e,t)}),c)),!r&&c&&c.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return m._data(e,n)||m._data(e,n,{empty:m.Callbacks("once memory").add((function(){m._removeData(e,t+"queue"),m._removeData(e,n)}))})}}),m.fn.extend({queue:function(e,data){var t=2;return"string"!=typeof e&&(data=e,e="fx",t--),arguments.length<t?m.queue(this[0],e):void 0===data?this:this.each((function(){var t=m.queue(this,e,data);m._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&m.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){m.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=m.Deferred(),c=this,i=this.length,l=function(){--r||o.resolveWith(c,[c])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)(n=m._data(c[i],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(l));return l(),o.promise(t)}}),m.event={global:{},add:function(e,t,n,data,r){var o,c,l,d,f,h,y,v,C,S,k,x=m._data(e);if(x){for(n.handler&&(n=(d=n).handler,r=d.selector),n.guid||(n.guid=m.guid++),(c=x.events)||(c=x.events={}),(h=x.handle)||((h=x.handle=function(e){return void 0===m||e&&m.event.triggered===e.type?void 0:m.event.dispatch.apply(h.elem,arguments)}).elem=e),l=(t=(t||"").match(R)||[""]).length;l--;)C=k=(o=F.exec(t[l])||[])[1],S=(o[2]||"").split(".").sort(),C&&(f=m.event.special[C]||{},C=(r?f.delegateType:f.bindType)||C,f=m.event.special[C]||{},y=m.extend({type:C,origType:k,data:data,handler:n,guid:n.guid,selector:r,needsContext:r&&m.expr.match.needsContext.test(r),namespace:S.join(".")},d),(v=c[C])||((v=c[C]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,data,S,h)||(e.addEventListener?e.addEventListener(C,h,!1):e.attachEvent&&e.attachEvent("on"+C,h))),f.add&&(f.add.call(e,y),y.handler.guid||(y.handler.guid=n.guid)),r?v.splice(v.delegateCount++,0,y):v.push(y),m.event.global[C]=!0);e=null}},remove:function(e,t,n,r,o){var c,l,d,f,h,y,v,C,S,k,x,w=m.hasData(e)&&m._data(e);if(w&&(y=w.events)){for(h=(t=(t||"").match(R)||[""]).length;h--;)if(S=x=(d=F.exec(t[h])||[])[1],k=(d[2]||"").split(".").sort(),S){for(v=m.event.special[S]||{},C=y[S=(r?v.delegateType:v.bindType)||S]||[],d=d[2]&&new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"),f=c=C.length;c--;)l=C[c],!o&&x!==l.origType||n&&n.guid!==l.guid||d&&!d.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(C.splice(c,1),l.selector&&C.delegateCount--,v.remove&&v.remove.call(e,l));f&&!C.length&&(v.teardown&&!1!==v.teardown.call(e,k,w.handle)||m.removeEvent(e,S,w.handle),delete y[S])}else for(S in y)m.event.remove(e,S+t[h],n,r,!0);m.isEmptyObject(y)&&(delete w.handle,m._removeData(e,"events"))}},trigger:function(e,data,t,n){var r,o,c,l,f,h,i,y=[t||w],v=d.call(e,"type")?e.type:e,C=d.call(e,"namespace")?e.namespace.split("."):[];if(c=h=t=t||w,3!==t.nodeType&&8!==t.nodeType&&!H.test(v+m.event.triggered)&&(v.indexOf(".")>=0&&(C=v.split("."),v=C.shift(),C.sort()),o=v.indexOf(":")<0&&"on"+v,(e=e[m.expando]?e:new m.Event(v,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=C.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+C.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=t),data=null==data?[e]:m.makeArray(data,[e]),f=m.event.special[v]||{},n||!f.trigger||!1!==f.trigger.apply(t,data))){if(!n&&!f.noBubble&&!m.isWindow(t)){for(l=f.delegateType||v,H.test(l+v)||(c=c.parentNode);c;c=c.parentNode)y.push(c),h=c;h===(t.ownerDocument||w)&&y.push(h.defaultView||h.parentWindow||window)}for(i=0;(c=y[i++])&&!e.isPropagationStopped();)e.type=i>1?l:f.bindType||v,(r=(m._data(c,"events")||{})[e.type]&&m._data(c,"handle"))&&r.apply(c,data),(r=o&&c[o])&&r.apply&&m.acceptData(c)&&(e.result=r.apply(c,data),!1===e.result&&e.preventDefault());if(e.type=v,!n&&!e.isDefaultPrevented()&&(!f._default||!1===f._default.apply(y.pop(),data))&&m.acceptData(t)&&o&&t[v]&&!m.isWindow(t)){(h=t[o])&&(t[o]=null),m.event.triggered=v;try{t[v]()}catch(e){}m.event.triggered=void 0,h&&(t[o]=h)}return e.result}},dispatch:function(e){e=m.event.fix(e);var i,n,r,o,c,l=[],d=t.call(arguments),f=(m._data(this,"events")||{})[e.type]||[],h=m.event.special[e.type]||{};if(d[0]=e,e.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,e)){for(l=m.event.handlers.call(this,e,f),i=0;(o=l[i++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,c=0;(r=o.handlers[c++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(r.namespace)||(e.handleObj=r,e.data=r.data,void 0!==(n=((m.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,d))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,o,i,c=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&(!e.button||"click"!==e.type))for(;d!=this;d=d.parentNode||this)if(1===d.nodeType&&(!0!==d.disabled||"click"!==e.type)){for(o=[],i=0;i<l;i++)void 0===o[n=(r=t[i]).selector+" "]&&(o[n]=r.needsContext?m(n,this).index(d)>=0:m.find(n,this,null,[d]).length),o[n]&&o.push(r);o.length&&c.push({elem:d,handlers:o})}return l<t.length&&c.push({elem:this,handlers:t.slice(l)}),c},fix:function(e){if(e[m.expando])return e;var i,t,n,r=e.type,o=e,c=this.fixHooks[r];for(c||(this.fixHooks[r]=c=U.test(r)?this.mouseHooks:M.test(r)?this.keyHooks:{}),n=c.props?this.props.concat(c.props):this.props,e=new m.Event(o),i=n.length;i--;)e[t=n[i]]=o[t];return e.target||(e.target=o.srcElement||w),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,c.filter?c.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var body,n,r,button=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||w).documentElement,body=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||body&&body.scrollLeft||0)-(r&&r.clientLeft||body&&body.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||body&&body.scrollTop||0)-(r&&r.clientTop||body&&body.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===button||(e.which=1&button?1:2&button?3:4&button?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(m.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return m.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var o=m.extend(new m.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?m.event.trigger(o,null,t):m.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},m.removeEvent=w.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(void 0===e[r]&&(e[r]=null),e.detachEvent(r,n))},m.Event=function(e,t){if(!(this instanceof m.Event))return new m.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?K:z):this.type=e,t&&m.extend(this,t),this.timeStamp=e&&e.timeStamp||m.now(),this[m.expando]=!0};var j=/^(?:input|select|textarea)$/i,M=/^key/,U=/^(?:mouse|pointer|contextmenu)|click/,H=/^(?:focusinfocus|focusoutblur)$/,F=/^([^.]*)(?:\.(.+)|)$/;function K(){return!0}function z(){return!1}m.Event.prototype={isDefaultPrevented:z,isPropagationStopped:z,isImmediatePropagationStopped:z,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=K,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=K,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=K,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},f.submitBubbles||(m.event.special.submit={setup:function(){if(m.nodeName(this,"form"))return!1;m.event.add(this,"click._submit keypress._submit",(function(e){var t=e.target,form=m.nodeName(t,"input")||m.nodeName(t,"button")?t.form:void 0;form&&!m._data(form,"submitBubbles")&&(m.event.add(form,"submit._submit",(function(e){e._submit_bubble=!0})),m._data(form,"submitBubbles",!0))}))},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&m.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(m.nodeName(this,"form"))return!1;m.event.remove(this,"._submit")}}),f.changeBubbles||(m.event.special.change={setup:function(){if(j.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(m.event.add(this,"propertychange._change",(function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)})),m.event.add(this,"click._change",(function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,e,!0)}))),!1;m.event.add(this,"beforeactivate._change",(function(e){var t=e.target;j.test(t.nodeName)&&!m._data(t,"changeBubbles")&&(m.event.add(t,"change._change",(function(e){!this.parentNode||e.isSimulated||e.isTrigger||m.event.simulate("change",this.parentNode,e,!0)})),m._data(t,"changeBubbles",!0))}))},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return m.event.remove(this,"._change"),!j.test(this.nodeName)}}),f.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){m.event.simulate(t,e.target,m.event.fix(e),!0)};m.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=m._data(r,t);o||r.addEventListener(e,n,!0),m._data(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=m._data(r,t)-1;o?m._data(r,t,o):(r.removeEventListener(e,n,!0),m._removeData(r,t))}}})),m.fn.extend({on:function(e,t,data,n,r){var o,c;if("object"==typeof e){for(o in"string"!=typeof t&&(data=data||t,t=void 0),e)this.on(o,t,data,e[o],r);return this}if(null==data&&null==n?(n=t,data=t=void 0):null==n&&("string"==typeof t?(n=data,data=void 0):(n=data,data=t,t=void 0)),!1===n)n=z;else if(!n)return this;return 1===r&&(c=n,(n=function(e){return m().off(e),c.apply(this,arguments)}).guid=c.guid||(c.guid=m.guid++)),this.each((function(){m.event.add(this,e,n,data,t)}))},one:function(e,t,data,n){return this.on(e,t,data,n,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,m(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=z),this.each((function(){m.event.remove(this,e,n,t)}))},trigger:function(e,data){return this.each((function(){m.event.trigger(e,data,this)}))},triggerHandler:function(e,data){var t=this[0];if(t)return m.event.trigger(e,data,t,!0)}}),m.fn.delay=function(time,e){return time=m.fx&&m.fx.speeds[time]||time,e=e||"fx",this.queue(e,(function(e,t){var n=setTimeout(e,time);t.stop=function(){clearTimeout(n)}}))};var X=m.now(),G=/\?/,V=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");var e,t=null,n=m.trim(data+"");return n&&!m.trim(n.replace(V,(function(n,r,o,c){return e&&r&&(t=0),0===t?n:(e=o||r,t+=!c-!o,"")})))?Function("return "+n)():m.error("Invalid JSON: "+data)},m.parseXML=function(data){var e;if(!data||"string"!=typeof data)return null;try{window.DOMParser?e=(new DOMParser).parseFromString(data,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(data))}catch(t){e=void 0}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+data),e};var W,$,J=/#.*$/,Q=/([?&])_=[^&]*/,Y=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Z=/^(?:GET|HEAD)$/,ee=/^\/\//,te=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ne={},re={},oe="*/".concat("*");try{$=location.href}catch(e){($=w.createElement("a")).href="",$=$.href}function ie(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(R)||[];if(m.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function ae(e,t,n,r){var o={},c=e===re;function l(d){var f;return o[d]=!0,m.each(e[d]||[],(function(e,d){var h=d(t,n,r);return"string"!=typeof h||c||o[h]?c?!(f=h):void 0:(t.dataTypes.unshift(h),l(h),!1)})),f}return l(t.dataTypes[0])||!o["*"]&&l("*")}function se(e,t){var n,r,o=m.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&m.extend(!0,e,n),e}W=te.exec($.toLowerCase())||[],m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:$,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(W[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?se(se(e,m.ajaxSettings),t):se(m.ajaxSettings,e)},ajaxPrefilter:ie(ne),ajaxTransport:ie(re),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,r,o,c,l,d,f,s=m.ajaxSetup({},t),h=s.context||s,y=s.context&&(h.nodeType||h.jquery)?m(h):m.event,v=m.Deferred(),C=m.Callbacks("once memory"),S=s.statusCode||{},k={},x={},w=0,T="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!f)for(f={};t=Y.exec(o);)f[t[1].toLowerCase()]=t[2];t=f[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=x[n]=x[n]||e,k[e]=t),this},overrideMimeType:function(e){return w||(s.mimeType=e),this},statusCode:function(map){var code;if(map)if(w<2)for(code in map)S[code]=[S[code],map[code]];else _.always(map[_.status]);return this},abort:function(e){var t=e||T;return d&&d.abort(t),E(0,t),this}};if(v.promise(_).complete=C.add,_.success=_.done,_.error=_.fail,s.url=((e||s.url||$)+"").replace(J,"").replace(ee,W[1]+"//"),s.type=t.method||t.type||s.method||s.type,s.dataTypes=m.trim(s.dataType||"*").toLowerCase().match(R)||[""],null==s.crossDomain&&(n=te.exec(s.url.toLowerCase()),s.crossDomain=!(!n||n[1]===W[1]&&n[2]===W[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(W[3]||("http:"===W[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=m.param(s.data,s.traditional)),ae(ne,s,t,_),2===w)return _;for(i in(l=s.global)&&0==m.active++&&m.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!Z.test(s.type),r=s.url,s.hasContent||(s.data&&(r=s.url+=(G.test(r)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=Q.test(r)?r.replace(Q,"$1_="+X++):r+(G.test(r)?"&":"?")+"_="+X++)),s.ifModified&&(m.lastModified[r]&&_.setRequestHeader("If-Modified-Since",m.lastModified[r]),m.etag[r]&&_.setRequestHeader("If-None-Match",m.etag[r])),(s.data&&s.hasContent&&!1!==s.contentType||t.contentType)&&_.setRequestHeader("Content-Type",s.contentType),s.headers)_.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(h,_,s)||2===w))return _.abort();for(i in T="abort",{success:1,error:1,complete:1})_[i](s[i]);if(d=ae(re,s,t,_)){_.readyState=1,l&&y.trigger("ajaxSend",[_,s]),s.async&&s.timeout>0&&(c=setTimeout((function(){_.abort("timeout")}),s.timeout));try{w=1,d.send(k,E)}catch(e){if(!(w<2))throw e;E(-1,e)}}else E(-1,"No Transport");function E(e,t,n,f){var k,x,T,R,E,A=t;2!==w&&(w=2,c&&clearTimeout(c),d=void 0,o=f||"",_.readyState=e>0?4:0,k=e>=200&&e<300||304===e,n&&(R=function(s,e,t){for(var n,r,o,c,l=s.contents,d=s.dataTypes;"*"===d[0];)d.shift(),void 0===r&&(r=s.mimeType||e.getResponseHeader("Content-Type"));if(r)for(c in l)if(l[c]&&l[c].test(r)){d.unshift(c);break}if(d[0]in t)o=d[0];else{for(c in t){if(!d[0]||s.converters[c+" "+d[0]]){o=c;break}n||(n=c)}o=o||n}if(o)return o!==d[0]&&d.unshift(o),t[o]}(s,_,n)),R=function(s,e,t,n){var r,o,c,l,d,f={},h=s.dataTypes.slice();if(h[1])for(c in s.converters)f[c.toLowerCase()]=s.converters[c];for(o=h.shift();o;)if(s.responseFields[o]&&(t[s.responseFields[o]]=e),!d&&n&&s.dataFilter&&(e=s.dataFilter(e,s.dataType)),d=o,o=h.shift())if("*"===o)o=d;else if("*"!==d&&d!==o){if(!(c=f[d+" "+o]||f["* "+o]))for(r in f)if((l=r.split(" "))[1]===o&&(c=f[d+" "+l[0]]||f["* "+l[0]])){!0===c?c=f[r]:!0!==f[r]&&(o=l[0],h.unshift(l[1]));break}if(!0!==c)if(c&&s.throws)e=c(e);else try{e=c(e)}catch(e){return{state:"parsererror",error:c?e:"No conversion from "+d+" to "+o}}}return{state:"success",data:e}}(s,R,_,k),k?(s.ifModified&&((E=_.getResponseHeader("Last-Modified"))&&(m.lastModified[r]=E),(E=_.getResponseHeader("etag"))&&(m.etag[r]=E)),204===e||"HEAD"===s.type?A="nocontent":304===e?A="notmodified":(A=R.state,x=R.data,k=!(T=R.error))):(T=A,!e&&A||(A="error",e<0&&(e=0))),_.status=e,_.statusText=(t||A)+"",k?v.resolveWith(h,[x,A,_]):v.rejectWith(h,[_,A,T]),_.statusCode(S),S=void 0,l&&y.trigger(k?"ajaxSuccess":"ajaxError",[_,s,k?x:T]),C.fireWith(h,[_,A]),l&&(y.trigger("ajaxComplete",[_,s]),--m.active||m.event.trigger("ajaxStop")))}return _},getJSON:function(e,data,t){return m.get(e,data,t,"json")},getScript:function(e,t){return m.get(e,void 0,t,"script")}}),m.each(["get","post"],(function(i,e){m[e]=function(t,data,n,r){return m.isFunction(data)&&(r=r||n,n=data,data=void 0),m.ajax({url:t,type:e,dataType:r,data:data,success:n})}})),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(i,e){m.fn[e]=function(t){return this.on(e,t)}})),m._evalUrl=function(e){return m.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};var ce=/%20/g,ue=/\[\]$/,le=/\r?\n/g,de=/^(?:submit|button|image|reset|file)$/i,pe=/^(?:input|select|textarea|keygen)/i;function fe(e,t,n,r){var o;if(m.isArray(t))m.each(t,(function(i,t){n||ue.test(e)?r(e,t):fe(e+"["+("object"==typeof t?i:"")+"]",t,n,r)}));else if(n||"object"!==m.type(t))r(e,t);else for(o in t)fe(e+"["+o+"]",t[o],n,r)}m.param=function(a,e){var t,s=[],n=function(e,t){t=m.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===e&&(e=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,(function(){n(this.name,this.value)}));else for(t in a)fe(t,a[t],e,n);return s.join("&").replace(ce,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=m.prop(this,"elements");return e?m.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!m(this).is(":disabled")&&pe.test(this.nodeName)&&!de.test(e)&&(this.checked||!rcheckableType.test(e))})).map((function(i,e){var t=m(this).val();return null==t?null:m.isArray(t)?m.map(t,(function(t){return{name:e.name,value:t.replace(le,"\r\n")}})):{name:e.name,value:t.replace(le,"\r\n")}})).get()}}),m.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&ye()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:ye;var he=0,me={},ge=m.ajaxSettings.xhr();function ye(){try{return new window.XMLHttpRequest}catch(e){}}window.ActiveXObject&&m(window).on("unload",(function(){for(var e in me)me[e](void 0,!0)})),f.cors=!!ge&&"withCredentials"in ge,(ge=f.ajax=!!ge)&&m.ajaxTransport((function(e){var t;if(!e.crossDomain||f.cors)return{send:function(n,r){var i,o=e.xhr(),c=++he;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];for(i in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)void 0!==n[i]&&o.setRequestHeader(i,n[i]+"");o.upload&&e.progress&&(o.upload.onprogress=e.progress),o.send(e.hasContent&&(e.body||e.data)||null),t=function(n,l){var d,f,h;if(t&&(l||4===o.readyState))if(delete me[c],t=void 0,o.onreadystatechange=m.noop,l)4!==o.readyState&&o.abort();else{h={},d=o.status,"string"==typeof o.responseText&&(h.text=o.responseText);try{f=o.statusText}catch(e){f=""}d||!e.isLocal||e.crossDomain?1223===d&&(d=204):d=h.text?200:404}h&&r(d,f,h,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=me[c]=t:t()},abort:function(){t&&t(void 0,!0)}}})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return m.globalEval(text),text}}}),m.ajaxPrefilter("script",(function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)})),m.ajaxTransport("script",(function(s){if(s.crossDomain){var script,head=w.head||m("head")[0]||w.documentElement;return{send:function(e,t){(script=w.createElement("script")).async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(e,n){(n||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,n||t(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(void 0,!0)}}}}));var ve=[],Ce=/(=)\?(?=&|$)|\?\?/;return m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ve.pop()||m.expando+"_"+X++;return this[e]=!0,e}}),m.ajaxPrefilter("json jsonp",(function(s,e,t){var n,r,o,c=!1!==s.jsonp&&(Ce.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ce.test(s.data)&&"data");if(c||"jsonp"===s.dataTypes[0])return n=s.jsonpCallback=m.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,c?s[c]=s[c].replace(Ce,"$1"+n):!1!==s.jsonp&&(s.url+=(G.test(s.url)?"&":"?")+s.jsonp+"="+n),s.converters["script json"]=function(){return o||m.error(n+" was not called"),o[0]},s.dataTypes[0]="json",r=window[n],window[n]=function(){o=arguments},t.always((function(){window[n]=r,s[n]&&(s.jsonpCallback=e.jsonpCallback,ve.push(n)),o&&m.isFunction(r)&&r(o[0]),o=r=void 0})),"script"})),m.parseHTML=function(data,e,t){if(!data||"string"!=typeof data)return null;"boolean"==typeof e&&(t=e,e=!1),e=e||w;var n=rsingleTag.exec(data),r=!t&&[];return n?[e.createElement(n[1])]:(n=m.buildFragment([data],e,r),r&&r.length&&m(r).remove(),m.merge([],n.childNodes))},m}();e.exports=function(e,t){if((e=o.extend(!0,{headers:{},qs:{}},e)).type=e.method,delete e.method,e.onProgress&&(e.progress=e.onProgress,delete e.onProgress),e.qs){var n=r.stringify(e.qs);n&&(e.url+=(-1===e.url.indexOf("?")?"?":"&")+n),delete e.qs}if(e.json&&(e.data=e.body,delete e.json,delete e.body,!e.headers&&(e.headers={}),e.headers["Content-Type"]="application/json"),e.body&&(e.body instanceof Blob||"[object File]"===e.body.toString()||"[object Blob]"===e.body.toString()||(e.data=e.body,delete e.body)),e.headers){var c=e.headers;delete e.headers,e.beforeSend=function(e){for(var t in c)c.hasOwnProperty(t)&&"content-length"!==t.toLowerCase()&&"user-agent"!==t.toLowerCase()&&"origin"!==t.toLowerCase()&&"host"!==t.toLowerCase()&&e.setRequestHeader(t,c[t])}}var l=function(e){var t={};return e.getAllResponseHeaders().trim().split("\n").forEach((function(e){if(e){var n=e.indexOf(":"),r=e.substr(0,n).trim().toLowerCase(),o=e.substr(n+1).trim();t[r]=o}})),{statusCode:e.status,statusMessage:e.statusText,headers:t}};return e.success=function(data,e,n){t(null,l(n),data)},e.error=function(e){e.responseText?t(null,l(e),e.responseText):t(e.statusText,l(e),e.responseText)},e.dataType="text",o.ajax(e)}},811:function(e,t,n){"use strict";t.decode=t.parse=n(812),t.encode=t.stringify=n(813)},812:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,c){t=t||"&",n=n||"=";var l={};if("string"!=typeof e||0===e.length)return l;var d=/\+/g;e=e.split(t);var f=1e3;c&&"number"==typeof c.maxKeys&&(f=c.maxKeys);var h=e.length;f>0&&h>f&&(h=f);for(var i=0;i<h;++i){var m,y,v,C,S=e[i].replace(d,"%20"),k=S.indexOf(n);k>=0?(m=S.substr(0,k),y=S.substr(k+1)):(m=S,y=""),v=decodeURIComponent(m),C=decodeURIComponent(y),r(l,v)?o(l[v])?l[v].push(C):l[v]=[l[v],C]:l[v]=C}return l};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},813:function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,l){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?map(c(e),(function(c){var l=encodeURIComponent(r(c))+n;return o(e[c])?map(e[c],(function(e){return l+encodeURIComponent(r(e))})).join(t):l+encodeURIComponent(r(e[c]))})).join(t):l?encodeURIComponent(r(l))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function map(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var c=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},814:function(e,t,n){var r,o=n(815),c=n(796).EventProxy,l=n(793);var d={};function f(){var e=this.options.UploadIdCacheLimit;if(!r){if(e)try{r=JSON.parse(localStorage.getItem("cos_sdk_upload_cache"))||[]}catch(e){}r||(r=[])}}function h(e,t,n){f.call(this);for(var i=r.length-1;i>=0;i--)r[i][0]===e&&r[i][1]===t&&r.splice(i,1);r.unshift([e,t]);var o=this.options.UploadIdCacheLimit;r.length>o&&r.splice(o),o&&setTimeout((function(){try{localStorage.setItem("cos_sdk_upload_cache",JSON.stringify(r))}catch(e){}}))}function m(e){f.call(this),delete d[e];for(var i=r.length-1;i>=0;i--)r[i][1]===e&&r.splice(i,1);var t=this.options.UploadIdCacheLimit;r.length>t&&r.splice(t),t&&setTimeout((function(){try{r.length?localStorage.setItem("cos_sdk_upload_cache",JSON.stringify(r)):localStorage.removeItem("cos_sdk_upload_cache")}catch(e){}}))}function y(e){f.call(this);for(var t=[],i=0;i<r.length;i++)r[i][0]===e&&t.push(r[i][1]);return t.length?t:null}function v(e,t){var n=e.TaskId,r=e.Bucket,f=e.Region,h=e.Key,v=e.StorageClass,k=this,x={},w=e.FileSize,T=e.SliceSize,_=Math.ceil(w/T),R=0,E=l.throttleOnProgress.call(k,w,e.onHashProgress),A=function(t,n){var r=t.length;if(0===r)return n(null,!0);if(r>_)return n(null,!1);if(r>1&&Math.max(t[0].Size,t[1].Size)!==T)return n(null,!1);var o=function(c){if(c<r){var d=t[c];!function(t,n){var r=T*(t-1),o=Math.min(r+T,w),c=o-r;x[t]?n(null,{PartNumber:t,ETag:x[t],Size:c}):l.fileSlice(e.Body,r,o,!1,(function(e){l.getFileMd5(e,(function(e,r){if(e)return n(e);var o='"'+r+'"';x[t]=o,1,R+=c,n(e,{PartNumber:t,ETag:o,Size:c}),E({loaded:R,total:w})}))}))}(d.PartNumber,(function(e,t){t&&t.ETag===d.ETag&&t.Size===d.Size?o(c+1):n(null,!1)}))}else n(null,!0)};o(0)},N=new c;N.on("error",(function(e){if(k._isRunningTask(n))return t(e)})),N.on("upload_id_ready",(function(e){var map={},n=[];l.each(e.PartList,(function(e){map[e.PartNumber]=e}));for(var r=1;r<=_;r++){var o=map[r];o?(o.PartNumber=r,o.Uploaded=!0):o={PartNumber:r,ETag:null,Uploaded:!1},n.push(o)}e.PartList=n,t(null,e)})),N.on("no_available_upload_id",(function(){if(k._isRunningTask(n)){var o=l.extend({Bucket:r,Region:f,Key:h,Headers:l.clone(e.Headers),StorageClass:v,Body:e.Body},e),c=e.Headers["Content-Type"]||e.Body&&e.Body.type;c&&(o.Headers["Content-Type"]=c),k.multipartInit(o,(function(e,data){if(k._isRunningTask(n)){if(e)return N.emit("error",e);var r=data.UploadId;if(!r)return t({Message:"no upload id"});N.emit("upload_id_ready",{UploadId:r,PartList:[]})}}))}})),N.on("has_upload_id",(function(e){e=e.reverse(),o.eachLimit(e,1,(function(e,t){k._isRunningTask(n)&&(d[e]?t():S.call(k,{Bucket:r,Region:f,Key:h,UploadId:e},(function(r,o){if(k._isRunningTask(n)){if(r)return m.call(k,e),N.emit("error",r);var c=o.PartList;c.forEach((function(e){e.PartNumber*=1,e.Size*=1,e.ETag=e.ETag||""})),A(c,(function(r,o){if(k._isRunningTask(n))return r?N.emit("error",r):void(o?t({UploadId:e,PartList:c}):t())}))}})))}),(function(e){k._isRunningTask(n)&&(E(null,!0),e&&e.UploadId?N.emit("upload_id_ready",e):N.emit("no_available_upload_id"))}))})),N.on("seek_local_avail_upload_id",(function(t){var o,c=l.getFileUUID(e.Body,e.ChunkSize);if(c&&(o=y.call(k,c))){var v=function(e){if(e>=o.length)N.emit("has_upload_id",t);else{var c=o[e];if(!l.isInArray(t,c))return m.call(k,c),void v(e+1);d[c]?v(e+1):S.call(k,{Bucket:r,Region:f,Key:h,UploadId:c},(function(t,r){k._isRunningTask(n)&&(t?(m.call(k,c),v(e+1)):N.emit("upload_id_ready",{UploadId:c,PartList:r.PartList}))}))}};v(0)}else N.emit("has_upload_id",t)})),N.on("get_remote_upload_id_list",(function(t){C.call(k,{Bucket:r,Region:f,Key:h},(function(t,data){if(k._isRunningTask(n)){if(t)return N.emit("error",t);var r=l.filter(data.UploadList,(function(e){return e.Key===h&&(!v||e.StorageClass.toUpperCase()===v.toUpperCase())})).reverse().map((function(e){return e.UploadId||e.UploadID}));if(r.length)N.emit("seek_local_avail_upload_id",r);else{var o,c=l.getFileUUID(e.Body,e.ChunkSize);c&&(o=y.call(k,c))&&l.each(o,(function(e){m.call(k,e)})),N.emit("no_available_upload_id")}}}))})),N.emit("get_remote_upload_id_list")}function C(e,t){var n=this,r=[],o={Bucket:e.Bucket,Region:e.Region,Prefix:e.Key},c=function(){n.multipartList(o,(function(e,data){if(e)return t(e);r.push.apply(r,data.Upload||[]),"true"===data.IsTruncated?(o.KeyMarker=data.NextKeyMarker,o.UploadIdMarker=data.NextUploadIdMarker,c()):t(null,{UploadList:r})}))};c()}function S(e,t){var n=this,r=[],o={Bucket:e.Bucket,Region:e.Region,Key:e.Key,UploadId:e.UploadId},c=function(){n.multipartListPart(o,(function(e,data){if(e)return t(e);r.push.apply(r,data.Part||[]),"true"===data.IsTruncated?(o.PartNumberMarker=data.NextPartNumberMarker,c()):t(null,{PartList:r})}))};c()}function k(e,t){var n=this,r=e.TaskId,c=e.Bucket,d=e.Region,f=e.Key,h=e.UploadData,m=e.FileSize,y=e.SliceSize,v=Math.min(e.AsyncLimit||n.options.ChunkParallelLimit||1,256),C=e.Body,S=Math.ceil(m/y),k=0,w=e.ServerSideEncryption,T=l.filter(h.PartList,(function(e){return e.Uploaded&&(k+=e.PartNumber>=S&&m%y||y),!e.Uploaded})),_=e.onProgress;o.eachLimit(T,v,(function(e,t){if(n._isRunningTask(r)){var o=e.PartNumber,v=Math.min(m,e.PartNumber*y)-(e.PartNumber-1)*y,S=0;x.call(n,{TaskId:r,Bucket:c,Region:d,Key:f,SliceSize:y,FileSize:m,PartNumber:o,ServerSideEncryption:w,Body:C,UploadData:h,onProgress:function(data){k+=data.loaded-S,S=data.loaded,_({loaded:k,total:m})}},(function(o,data){n._isRunningTask(r)&&(!l.isBrowser||o||data.ETag||(o='get ETag error, please add "ETag" to CORS ExposeHeader setting.'),o?k-=S:(k+=v-S,e.ETag=data.ETag),t(o||null,data))}))}}),(function(e){if(n._isRunningTask(r))return e?t(e):void t(null,{UploadId:h.UploadId,SliceList:h.PartList})}))}function x(e,t){var n=this,r=e.TaskId,c=e.Bucket,d=e.Region,f=e.Key,h=e.FileSize,m=e.Body,y=1*e.PartNumber,v=e.SliceSize,C=e.ServerSideEncryption,S=e.UploadData,k=n.options.ChunkRetryTimes+1,x=v*(y-1),w=v,T=x+v;T>h&&(w=(T=h)-x);var _=S.PartList[y-1];o.retry(k,(function(t){n._isRunningTask(r)&&l.fileSlice(m,x,T,!0,(function(o){n.multipartUpload({TaskId:r,Bucket:c,Region:d,Key:f,ContentLength:w,PartNumber:y,UploadId:S.UploadId,ServerSideEncryption:C,Body:o,onProgress:e.onProgress},(function(e,data){if(n._isRunningTask(r))return e?t(e):(_.Uploaded=!0,t(null,data))}))}))}),(function(e,data){if(n._isRunningTask(r))return t(e,data)}))}function w(e,t){var n=e.Bucket,r=e.Region,c=e.Key,l=e.UploadId,d=e.SliceList,f=this,h=this.options.ChunkRetryTimes+1,m=d.map((function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}}));o.retry(h,(function(e){f.multipartComplete({Bucket:n,Region:r,Key:c,UploadId:l,Parts:m},e)}),(function(e,data){t(e,data)}))}function T(e,t){var n=e.Bucket,r=e.Region,c=e.Key,l=e.AbortArray,d=e.AsyncLimit||1,f=this,h=0,m=new Array(l.length);o.eachLimit(l,d,(function(t,o){var l=h;if(c&&c!==t.Key)return m[l]={error:{KeyNotMatch:!0}},void o(null);var d=t.UploadId||t.UploadID;f.multipartAbort({Bucket:n,Region:r,Key:t.Key,Headers:e.Headers,UploadId:d},(function(e,data){var c={Bucket:n,Region:r,Key:t.Key,UploadId:d};m[l]={error:e,task:c},o(null)})),h++}),(function(e){if(e)return t(e);for(var n=[],r=[],i=0,o=m.length;i<o;i++){var c=m[i];c.task&&(c.error?r.push(c.task):n.push(c.task))}return t(null,{successList:n,errorList:r})}))}function _(e,t){var n=e.TaskId,r=e.Bucket,c=e.Region,l=e.Key,d=e.CopySource,f=e.UploadId,h=1*e.PartNumber,m=e.CopySourceRange,y=this.options.ChunkRetryTimes+1,v=this;o.retry(y,(function(t){v.uploadPartCopy({TaskId:n,Bucket:r,Region:c,Key:l,CopySource:d,UploadId:f,PartNumber:h,CopySourceRange:m,onProgress:e.onProgress},(function(e,data){t(e||null,data)}))}),(function(e,data){return t(e,data)}))}var R={sliceUploadFile:function(e,t){var n,r,o=this,f=new c,y=e.TaskId,C=e.Bucket,S=e.Region,x=e.Key,T=e.Body,_=e.ChunkSize||e.SliceSize||o.options.ChunkSize,R=e.AsyncLimit,E=e.StorageClass||"Standard",A=e.ServerSideEncryption,N=e.onHashProgress;f.on("error",(function(e){if(o._isRunningTask(y))return t(e)})),f.on("upload_complete",(function(e){t(null,e)})),f.on("upload_slice_complete",(function(e){w.call(o,{Bucket:C,Region:S,Key:x,UploadId:e.UploadId,SliceList:e.SliceList},(function(t,data){if(o._isRunningTask(y)){if(delete d[e.UploadId],t)return r(null,!0),f.emit("error",t);r({loaded:n,total:n},!0),m.call(o,e.UploadId),f.emit("upload_complete",data)}}))})),f.on("get_upload_data_finish",(function(t){var c=l.getFileUUID(T,e.ChunkSize);c&&h.call(o,c,t.UploadId),d[t.UploadId]=!0,y&&o.on("inner-kill-task",(function(data){data.TaskId===y&&"canceled"===data.toState&&delete d[t.UploadId]})),k.call(o,{TaskId:y,Bucket:C,Region:S,Key:x,Body:T,FileSize:n,SliceSize:_,AsyncLimit:R,ServerSideEncryption:A,UploadData:t,onProgress:r},(function(e,data){if(o._isRunningTask(y))return e?(r(null,!0),f.emit("error",e)):void f.emit("upload_slice_complete",data)}))})),f.on("get_file_size_finish",(function(){if(r=l.throttleOnProgress.call(o,n,e.onProgress),e.UploadData.UploadId)f.emit("get_upload_data_finish",e.UploadData);else{var t=l.extend({TaskId:y,Bucket:C,Region:S,Key:x,Headers:e.Headers,StorageClass:E,Body:T,FileSize:n,SliceSize:_,onHashProgress:N},e);v.call(o,t,(function(t,n){if(o._isRunningTask(y)){if(t)return f.emit("error",t);e.UploadData.UploadId=n.UploadId,e.UploadData.PartList=n.PartList,f.emit("get_upload_data_finish",e.UploadData)}}))}})),n=e.ContentLength,delete e.ContentLength,!e.Headers&&(e.Headers={}),l.each(e.Headers,(function(t,n){"content-length"===n.toLowerCase()&&delete e.Headers[n]})),function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],r=1048576,i=0;i<t.length&&!(n/(r=1024*t[i]*1024)<=o.options.MaxPartNumber);i++);e.ChunkSize=e.SliceSize=_=Math.max(_,r)}(),0===n?(e.Body="",e.ContentLength=0,e.SkipTask=!0,o.putObject(e,(function(e,data){if(e)return t(e);t(null,data)}))):f.emit("get_file_size_finish")},abortUploadTask:function(e,t){var n=e.Bucket,r=e.Region,o=e.Key,l=e.UploadId,d=e.Level||"task",f=e.AsyncLimit,h=this,m=new c;if(m.on("error",(function(e){return t(e)})),m.on("get_abort_array",(function(c){T.call(h,{Bucket:n,Region:r,Key:o,Headers:e.Headers,AsyncLimit:f,AbortArray:c},(function(e,data){if(e)return t(e);t(null,data)}))})),"bucket"===d)C.call(h,{Bucket:n,Region:r},(function(e,data){if(e)return t(e);m.emit("get_abort_array",data.UploadList||[])}));else if("file"===d){if(!o)return t({error:"abort_upload_task_no_key"});C.call(h,{Bucket:n,Region:r,Key:o},(function(e,data){if(e)return t(e);m.emit("get_abort_array",data.UploadList||[])}))}else{if("task"!==d)return t({error:"abort_unknown_level"});if(!l)return t({error:"abort_upload_task_no_id"});if(!o)return t({error:"abort_upload_task_no_key"});m.emit("get_abort_array",[{Key:o,UploadId:l}])}},uploadFiles:function(e,t){var n=void 0===e.SliceSize?this.options.SliceSize:e.SliceSize,r=0,o=0,c=l.throttleOnProgress.call(this,o,e.onProgress),d=e.files.length,f=e.onFileFinish,h=Array(d),m=function(e,data,n){c(null,!0),f&&f(e,data,n),h[n.Index]={options:n,error:e,data:data},--d<=0&&t&&t(null,{files:h})},y=[];l.each(e.files,(function(e,t){!function(){var d=e.Body,f=d.size||d.length||0,h={Index:t,TaskId:""};r+=f,l.each(e,(function(e,t){"object"!=typeof e&&"function"!=typeof e&&(h[t]=e)}));var v=e.onTaskReady;e.onTaskReady=function(e){h.TaskId=e,v&&v(e)};var C=0,S=e.onProgress;e.onProgress=function(e){o=o-C+e.loaded,C=e.loaded,S&&S(e),c({loaded:o,total:r})};var k=e.onFileFinish,x=f>=n?"sliceUploadFile":"putObject";y.push({api:x,params:e,callback:function(e,data){k&&k(e,data),m&&m(e,data,h)}})}()})),this._addTasks(y)},sliceCopyFile:function(e,t){var n=new c,r=this,d=e.Bucket,f=e.Region,h=e.Key,m=e.CopySource,y=m.match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(y){var v=y[1],C=y[3],S=decodeURIComponent(y[4]),k=void 0===e.SliceSize?r.options.CopySliceSize:e.SliceSize;k=Math.max(0,Math.min(k,5368709120));var x,w,T=e.ChunkSize||this.options.CopyChunkSize,R=this.options.CopyChunkParallelLimit,E=0;n.on("copy_slice_complete",(function(e){r.multipartComplete({Bucket:d,Region:f,Key:h,UploadId:e.UploadId,Parts:e.PartList},(function(e,data){if(e)return w(null,!0),t(e);w({loaded:x,total:x},!0),t(null,data)}))})),n.on("get_copy_data_finish",(function(e){o.eachLimit(e.PartList,R,(function(t,n){var o=t.PartNumber,c=t.CopySourceRange,l=t.end-t.start,y=0;_.call(r,{Bucket:d,Region:f,Key:h,CopySource:m,UploadId:e.UploadId,PartNumber:o,CopySourceRange:c,onProgress:function(data){E+=data.loaded-y,y=data.loaded,w({loaded:E,total:x})}},(function(e,data){if(e)return n(e);w({loaded:E,total:x}),E+=l-y,t.ETag=data.ETag,n(e||null,data)}))}),(function(r){if(r)return w(null,!0),t(r);n.emit("copy_slice_complete",e)}))})),n.on("get_file_size_finish",(function(o){var c;!function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],n=1048576,i=0;i<t.length&&!(x/(n=1024*t[i]*1024)<=r.options.MaxPartNumber);i++);e.ChunkSize=T=Math.max(T,n);for(var o=Math.ceil(x/T),c=[],l=1;l<=o;l++){var d=(l-1)*T,f=l*T<x?l*T-1:x-1,h={PartNumber:l,start:d,end:f,CopySourceRange:"bytes="+d+"-"+f};c.push(h)}e.PartList=c}(),(c="Replaced"===e.Headers["x-cos-metadata-directive"]?e.Headers:o)["x-cos-storage-class"]=e.Headers["x-cos-storage-class"]||o["x-cos-storage-class"],c=l.clearKey(c),r.multipartInit({Bucket:d,Region:f,Key:h,Headers:c},(function(r,data){if(r)return t(r);e.UploadId=data.UploadId,n.emit("get_copy_data_finish",e)}))})),r.headObject({Bucket:v,Region:C,Key:S},(function(o,data){if(o)o.statusCode&&404===o.statusCode?t({ErrorStatus:S+" Not Exist"}):t(o);else if(void 0!==(x=e.FileSize=data.headers["content-length"])&&x)if(w=l.throttleOnProgress.call(r,x,e.onProgress),x<=k)e.Headers["x-cos-metadata-directive"]||(e.Headers["x-cos-metadata-directive"]="Copy"),r.putObjectCopy(e,(function(e,data){if(e)return w(null,!0),t(e);w({loaded:x,total:x},!0),t(e,data)}));else{var c=data.headers,d={"Cache-Control":c["cache-control"],"Content-Disposition":c["content-disposition"],"Content-Encoding":c["content-encoding"],"Content-Type":c["content-type"],Expires:c.expires,"x-cos-storage-class":c["x-cos-storage-class"]};l.each(c,(function(e,t){0===t.indexOf("x-cos-meta-")&&t.length>"x-cos-meta-".length&&(d[t]=e)})),n.emit("get_file_size_finish",d)}else t({error:'get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.'})}))}else t({error:"CopySource format error"})}};e.exports.init=function(e,t){t.transferToTaskMethod(R,"sliceUploadFile"),l.each(R,(function(t,n){e.prototype[n]=l.apiWrapper(n,t)}))}},815:function(e,t){var n={eachLimit:function(e,t,n,r){if(r=r||function(){},!e.length||t<=0)return r();var o=0,c=0,l=0;!function d(){if(o>=e.length)return r();for(;l<t&&c<e.length;)l+=1,n(e[(c+=1)-1],(function(t){t?(r(t),r=function(){}):(l-=1,(o+=1)>=e.length?r():d())}))}()},retry:function(e,t,n){var r=function(o){t((function(t,data){t&&o<e?r(o+1):n(t,data)}))};e<1?n():r(1)}};e.exports=n},816:function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,c=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var l=Number.isNaN||function(e){return e!=e};function d(){d.init.call(this)}e.exports=d,e.exports.once=function(e,t){return new Promise((function(n,r){function o(){void 0!==c&&e.removeListener("error",c),n([].slice.call(arguments))}var c;"error"!==t&&(c=function(n){e.removeListener(t,o),r(n)},e.once("error",c)),e.once(t,o)}))},d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var f=10;function h(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function m(e){return void 0===e._maxListeners?d.defaultMaxListeners:e._maxListeners}function y(e,t,n,r){var o,c,l,d;if(h(n),void 0===(c=e._events)?(c=e._events=Object.create(null),e._eventsCount=0):(void 0!==c.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),c=e._events),l=c[t]),void 0===l)l=c[t]=n,++e._eventsCount;else if("function"==typeof l?l=c[t]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),(o=m(e))>0&&l.length>o&&!l.warned){l.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=l.length,d=f,console&&console.warn&&console.warn(d)}return e}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=v.bind(r);return o.listener=n,r.wrapFn=o,o}function S(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(o):x(o,o.length)}function k(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function x(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");f=e}}),d.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},d.prototype.getMaxListeners=function(){return m(this)},d.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var d=r[e];if(void 0===d)return!1;if("function"==typeof d)c(d,this,t);else{var f=d.length,h=x(d,f);for(i=0;i<f;++i)c(h[i],this,t)}return!0},d.prototype.addListener=function(e,t){return y(this,e,t,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(e,t){return y(this,e,t,!0)},d.prototype.once=function(e,t){return h(t),this.on(e,C(this,e,t)),this},d.prototype.prependOnceListener=function(e,t){return h(t),this.prependListener(e,C(this,e,t)),this},d.prototype.removeListener=function(e,t){var n,r,o,i,c;if(h(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){c=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,c||t)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},d.prototype.listeners=function(e){return S(this,e,!0)},d.prototype.rawListeners=function(e){return S(this,e,!1)},d.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):k.call(e,t)},d.prototype.listenerCount=k,d.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},817:function(e){e.exports=JSON.parse('{"name":"vod-js-sdk-v6","version":"1.4.10","description":"tencent cloud vod js sdk v6","main":"lib/src/tc_vod.js","unpkg":"dist/vod-js-sdk-v6.js","typings":"lib/src/tc_vod.d.ts","scripts":{"test":"cross-env NODE_ENV=test mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts","cover":"cross-env NODE_ENV=test nyc mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts","dev":"webpack --config webpack.dev.config.js --watch","dist":"webpack --config webpack.config.js","build":"npm run test && npm run dist && npm run compile","compile":"tsc -p tsconfig.json","prepublish":"npm run build","lint":"tsc --noEmit && eslint \'src/**/*.{js,ts,tsx}\' --quiet --fix"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/vod-js-sdk-v6.git"},"keywords":["tencentcloud","sdk","vod"],"author":"alsotang <alsotang@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/tencentyun/vod-js-sdk-v6/issues"},"homepage":"https://github.com/tencentyun/vod-js-sdk-v6#readme","dependencies":{"axios":"^0.18.0","cos-js-sdk-v5":"0.5.16","js-sha1":"^0.6.0","uuid":"^3.3.2"},"devDependencies":{"@types/mocha":"^5.2.5","@types/semver":"^6.0.0","@types/sha1":"^1.1.1","@types/uuid":"^3.4.4","@typescript-eslint/eslint-plugin":"^1.9.0","@typescript-eslint/parser":"^1.9.0","cross-env":"^6.0.3","eslint":"^5.16.0","eslint-config-prettier":"^4.3.0","eslint-plugin-prettier":"^3.1.0","espower-typescript":"^9.0.1","jsdom":"^13.1.0","jsdom-global":"^3.0.2","mm":"^2.4.1","mocha":"^5.2.0","nyc":"^13.1.0","power-assert":"^1.6.1","prettier":"^1.17.1","semver":"^6.1.1","ts-loader":"^5.3.3","typescript":"^3.5.3","webpack":"^4.28.1","webpack-cli":"^3.2.1"},"nyc":{"extension":[".ts",".tsx"],"include":["src"],"reporter":["html"],"all":true}}')},818:function(e,t,n){var r=n(819),o=n(820);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||r)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var l=0;l<16;++l)t[i+l]=c[l];return t||o(c)}},819:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,i=0;i<16;i++)0==(3&i)&&(e=4294967296*Math.random()),o[i]=e>>>((3&i)<<3)&255;return o}}},820:function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}}}]);