(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{689:function(e,t){e.exports={data:function(){return{wehcatTimer:null,wechatBind:{}}},destroyed:function(){window.clearInterval(this.wehcatTimer)},methods:{createQRcode:function(){var e=this;this.$store.dispatch("jv/get","/oauth/wechat/pc/qrcode").then((function(t){if(t){e.wechatBind=t;var n=e;e.wehcatTimer=setInterval(n.getWechatStatus,3e3)}}),(function(t){return e.handleError(t)}))},getWechatStatus:function(){var e=this;this.wechatBind&&!this.wechatBind.session_token||this.$store.dispatch("jv/get","/oauth/wechat/pc/login/".concat(this.wechatBind.session_token)).then((function(t){if(t.pc_login){window.clearInterval(e.wehcatTimer),clearInterval(e.wehcatLoginTimer),e.$store.commit("session/SET_USER_ID",t._jv.id),e.$store.commit("session/CHECK_SESSION",!0),e.$store.commit("session/SET_ACCESS_TOKEN",t.access_token);var n=e.$store.getters["session/get"]("userId");e.userId=n,e.$store.dispatch("user/getUserInfo",n),e.userinfo(),e.isWechatModify=!1,e.$message.success("绑定成功")}}),(function(t){e.handleError(t),window.clearInterval(e.wehcatTimer),e.createQRcode()}))}}}}}]);