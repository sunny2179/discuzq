(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"14Xm":function(e,t,r){e.exports=r("u938")},"1iK8":function(e,t,r){"use strict";r.r(t);var n=r("GwKK"),a=r("NY7+");for(var s in a)["default"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(s);var o=r("KHd+"),i=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);t.default=i.exports},"4d7F":function(e,t,r){e.exports={default:r("aW7e"),__esModule:!0}},"88qf":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r("QbLZ"));r("I1+7");var a=s(r("lgPP"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)({name:"user-details-view"},a.default)},"8gHz":function(e,t,r){var n=r("5K7Z"),a=r("eaoh"),s=r("UWiX")("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||null==(r=n(o)[s])?t:a(r)}},D3Ub:function(e,t,r){"use strict";t.__esModule=!0;var n,a=r("4d7F"),s=(n=a)&&n.__esModule?n:{default:n};t.default=function(e){return function(){var t=e.apply(this,arguments);return new s.default((function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return s.default.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}},EXMj:function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},GwKK:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-details-box"},[r("div",{staticClass:"details-wallet-header"},[r("p",{staticClass:"details-wallet-header__name"},[e._v(e._s(this.userInfo.username)+"（UID："+e._s(this.userInfo.id)+"）")]),e._v(" "),r("i",{staticClass:"details-wallet-header__i"}),e._v(" "),r("span",{staticClass:"details-wallet-header__details"},[e._v("详情")]),e._v(" "),r("span",{on:{click:function(t){return e.$router.push({path:"/admin/wallet",query:e.query})}}},[e._v("钱包")])]),e._v(" "),r("Card",[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":e.uploaderLogo,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload},on:{change:e.handleFile}},[e.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),r("el-button",{style:{opacity:e.deleBtn?"1":"0",cursor:e.deleBtn?"pointer":"auto"},attrs:{type:"text"},on:{click:e.deleteImage}},[e._v("删除")])],1),e._v(" "),r("Card",{attrs:{header:"用户名："}},[r("CardRow",[r("el-input",{model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1)],1),e._v(" "),e.noAdmin?r("Card",{attrs:{header:"旧密码："}},[r("CardRow",{attrs:{description:"如果不更改密码此处请留空"}},[r("el-input",{attrs:{clearable:""},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}})],1)],1):e._e(),e._v(" "),r("Card",{attrs:{header:"新密码："}},[r("CardRow",{attrs:{description:"如果不更改密码此处请留空"}},[r("el-input",{attrs:{clearable:""},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1)],1),e._v(" "),e.noAdmin?r("Card",{attrs:{header:"确认新密码："}},[r("CardRow",{attrs:{description:"如果不更改密码此处请留空"}},[r("el-input",{attrs:{clearable:""},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1)],1):e._e(),e._v(" "),r("Card",{attrs:{header:"手机号："}},[r("CardRow",[r("el-input",{model:{value:e.userInfo.originalMobile,callback:function(t){e.$set(e.userInfo,"originalMobile",t)},expression:"userInfo.originalMobile"}})],1)],1),e._v(" "),r("Card",{attrs:{header:"用户角色："}},[r("CardRow",[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userRole[0],callback:function(t){e.$set(e.userRole,0,t)},expression:"userRole[0]"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{disabled:"6"===e.value||"7"===e.value,label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),r("Card",{attrs:{header:"状态："}},[r("CardRow",[r("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.userStatusChange(e.userInfo.status)}},model:{value:e.userInfo.status,callback:function(t){e.$set(e.userInfo,"status",t)},expression:"userInfo.status"}},e._l(e.optionsStatus,(function(e){return r("el-option",{key:e.value,attrs:{disabled:"2"===e.value,label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),r("Card",{directives:[{name:"show",rawName:"v-show",value:e.disabledReason,expression:"disabledReason"}],attrs:{header:"禁用原因："}},[r("CardRow",[r("el-input",{attrs:{clearable:""},model:{value:e.reasonsForDisable,callback:function(t){e.reasonsForDisable=t},expression:"reasonsForDisable"}})],1)],1),e._v(" "),r("Card",{attrs:{header:"过期时间："}},[r("div",{staticClass:"block"},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.expired_at,callback:function(t){e.expired_at=t},expression:"expired_at"}})],1)]),e._v(" "),r("Card",{attrs:{header:"注册时间："}},[r("p",[e._v(e._s(e.$dayjs(e.userInfo.createdAt).format("YYYY-MM-DD HH:mm")))])]),e._v(" "),r("Card",{attrs:{header:"注册IP："}},[r("p",[e._v(e._s(e.userInfo.registerIp))])]),e._v(" "),e.userInfo.loginAt?r("Card",{attrs:{header:"最后登录时间："}},[r("p",[e._v(e._s(e.$dayjs(e.userInfo.loginAt).format("YYYY-MM-DD HH:mm")))])]):e._e(),e._v(" "),r("Card",{attrs:{header:"最后登录IP："}},[r("p",[e._v(e._s(e.userInfo.lastLoginIp))])]),e._v(" "),e.wechatNickName?r("Card",{attrs:{header:"微信昵称："}},[r("p",[e._v(e._s(e.wechatNickName))])]):e._e(),e._v(" "),e.sex?r("Card",{attrs:{header:"性别："}},[r("p",[e._v(e._s(0===e.sex?"未知":1===e.sex?"男":"女"))])]):e._e(),e._v(" "),r("Card",{directives:[{name:"show",rawName:"v-show",value:e.realname,expression:"realname"}],attrs:{header:"实名认证姓名："}},[r("p",[e._v(e._s(e.userInfo.realname))])]),e._v(" "),r("Card",{directives:[{name:"show",rawName:"v-show",value:e.realname,expression:"realname"}],attrs:{header:"实名认证身份证号："}},[r("p",[e._v(e._s(e.userInfo.identity))])]),e._v(" "),r("Card",{staticClass:"footer-btn"},[r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.submission}},[e._v("提交")])],1)],1)},a=[]},"JMW+":function(e,t,r){"use strict";var n,a,s,o,i=r("uOPS"),u=r("5T2Y"),c=r("2GTP"),l=r("QMMT"),d=r("Y7ZC"),f=r("93I4"),v=r("eaoh"),h=r("EXMj"),p=r("oioR"),m=r("8gHz"),_=r("QXhf").set,w=r("q6LJ")(),g=r("ZW5q"),b=r("RDmV"),x=r("vBP9"),y=r("zXhZ"),P=u.TypeError,C=u.process,I=C&&C.versions,R=I&&I.v8||"",M=u.Promise,k="process"==l(C),N=function(){},U=a=g.f,j=!!function(){try{var e=M.resolve(1),t=(e.constructor={})[r("UWiX")("species")]=function(e){e(N,N)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(N)instanceof t&&0!==R.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(e){}}(),D=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},F=function(e,t){if(!e._n){e._n=!0;var r=e._c;w((function(){for(var n=e._v,a=1==e._s,s=0,o=function(t){var r,s,o,i=a?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{i?(a||(2==e._h&&$(e),e._h=1),!0===i?r=n:(l&&l.enter(),r=i(n),l&&(l.exit(),o=!0)),r===t.promise?c(P("Promise-chain cycle")):(s=D(r))?s.call(r,u,c):u(r)):c(n)}catch(e){l&&!o&&l.exit(),c(e)}};r.length>s;)o(r[s++]);e._c=[],e._n=!1,t&&!e._h&&Y(e)}))}},Y=function(e){_.call(u,(function(){var t,r,n,a=e._v,s=T(e);if(s&&(t=b((function(){k?C.emit("unhandledRejection",a,e):(r=u.onunhandledrejection)?r({promise:e,reason:a}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",a)})),e._h=k||T(e)?2:1),e._a=void 0,s&&t.e)throw t.v}))},T=function(e){return 1!==e._h&&0===(e._a||e._c).length},$=function(e){_.call(u,(function(){var t;k?C.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},E=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),F(t,!0))},W=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw P("Promise can't be resolved itself");(t=D(e))?w((function(){var n={_w:r,_d:!1};try{t.call(e,c(W,n,1),c(E,n,1))}catch(e){E.call(n,e)}})):(r._v=e,r._s=1,F(r,!1))}catch(e){E.call({_w:r,_d:!1},e)}}};j||(M=function(e){h(this,M,"Promise","_h"),v(e),n.call(this);try{e(c(W,this,1),c(E,this,1))}catch(e){E.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r("XJU/")(M.prototype,{then:function(e,t){var r=U(m(this,M));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=k?C.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&F(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),s=function(){var e=new n;this.promise=e,this.resolve=c(W,e,1),this.reject=c(E,e,1)},g.f=U=function(e){return e===M||e===o?new s(e):a(e)}),d(d.G+d.W+d.F*!j,{Promise:M}),r("RfKB")(M,"Promise"),r("TJWN")("Promise"),o=r("WEpk").Promise,d(d.S+d.F*!j,"Promise",{reject:function(e){var t=U(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(i||!j),"Promise",{resolve:function(e){return y(i&&this===o?M:this,e)}}),d(d.S+d.F*!(j&&r("TuGD")((function(e){M.all(e).catch(N)}))),"Promise",{all:function(e){var t=this,r=U(t),n=r.resolve,a=r.reject,s=b((function(){var r=[],s=0,o=1;p(e,!1,(function(e){var i=s++,u=!1;r.push(void 0),o++,t.resolve(e).then((function(e){u||(u=!0,r[i]=e,--o||n(r))}),a)})),--o||n(r)}));return s.e&&a(s.v),r.promise},race:function(e){var t=this,r=U(t),n=r.reject,a=b((function(){p(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return a.e&&n(a.v),r.promise}})},MCSJ:function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},"NY7+":function(e,t,r){"use strict";r.r(t);var n=r("88qf"),a=r.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(s);t.default=a.a},PBE1:function(e,t,r){"use strict";var n=r("Y7ZC"),a=r("WEpk"),s=r("5T2Y"),o=r("8gHz"),i=r("zXhZ");n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,a.Promise||s.Promise),r="function"==typeof e;return this.then(r?function(r){return i(t,e()).then((function(){return r}))}:e,r?function(r){return i(t,e()).then((function(){throw r}))}:e)}})},"Q/yX":function(e,t,r){"use strict";var n=r("Y7ZC"),a=r("ZW5q"),s=r("RDmV");n(n.S,"Promise",{try:function(e){var t=a.f(this),r=s(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},QXhf:function(e,t,r){var n,a,s,o=r("2GTP"),i=r("MCSJ"),u=r("MvwC"),c=r("Hsns"),l=r("5T2Y"),d=l.process,f=l.setImmediate,v=l.clearImmediate,h=l.MessageChannel,p=l.Dispatch,m=0,_={},w=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},g=function(e){w.call(e.data)};f&&v||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return _[++m]=function(){i("function"==typeof e?e:Function(e),t)},n(m),m},v=function(e){delete _[e]},"process"==r("a0xu")(d)?n=function(e){d.nextTick(o(w,e,1))}:p&&p.now?n=function(e){p.now(o(w,e,1))}:h?(s=(a=new h).port2,a.port1.onmessage=g,n=o(s.postMessage,s,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):n="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),w.call(e)}}:function(e){setTimeout(o(w,e,1),0)}),e.exports={set:f,clear:v}},RDmV:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},TJWN:function(e,t,r){"use strict";var n=r("5T2Y"),a=r("WEpk"),s=r("2faE"),o=r("jmDH"),i=r("UWiX")("species");e.exports=function(e){var t="function"==typeof a[e]?a[e]:n[e];o&&t&&!t[i]&&s.f(t,i,{configurable:!0,get:function(){return this}})}},"XJU/":function(e,t,r){var n=r("NegM");e.exports=function(e,t,r){for(var a in t)r&&e[a]?e[a]=t[a]:n(e,a,t[a]);return e}},ZW5q:function(e,t,r){"use strict";var n=r("eaoh");function a(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new a(e)}},aW7e:function(e,t,r){r("wgeU"),r("FlQf"),r("bBy9"),r("JMW+"),r("PBE1"),r("Q/yX"),e.exports=r("WEpk").Promise},lgPP:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r("14Xm")),a=u(r("D3Ub")),s=u(r("4gYi")),o=u(r("pNQN")),i=u(r("VVfg"));function u(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{fileList:[],options:[],optionsList:[],imageUrl:"",userRole:[],userInfo:{},newPassword:"",wechatNickName:"",sex:"",noAdmin:!1,disabledReason:!1,oldPassword:"",confirmPassword:"",reasonsForDisable:"",realname:"",expired_at:"",userName:"",optionsStatus:[{value:0,label:"正常"},{value:1,label:"禁用"},{value:2,label:"审核"},{value:3,label:"审核拒绝"}],value:"",query:{},deleBtn:!1}},created:function(){this.query=this.$route.query,this.getUserDetail(),this.getUserList()},methods:{getUserDetail:function(){var e=this;return(0,a.default)(n.default.mark((function t(){var r,a;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=i.default.getLItem("tokenId"),t.next=4,e.appFetch({method:"get",url:"users",splice:"/"+e.query.id,data:{include:"wechat,groups"}});case 4:(a=t.sent).errors?e.$message.error(a.errors[0].code):(e.userInfo=a.readdata._data,e.imageUrl=e.userInfo.avatarUrl,e.userName=e.userInfo.username,e.expired_at=e.userInfo.expiredAt&&e.$dayjs(e.userInfo.expiredAt).format("YYYY-MM-DD HH:mm:ss"),""!=e.imageUrl&&null!=e.imageUrl&&(e.deleBtn=!0),e.reasonsForDisable=e.userInfo.banReason,e.userRole=a.readdata.groups.map((function(e){return e._data.id})),a.readdata.wechat&&(e.wechatNickName=a.readdata.wechat._data.nickname,e.sex=a.readdata.wechat._data.sex),r==e.userInfo.id&&(e.noAdmin=!0),1==e.userInfo.status&&(e.disabledReason=!0),""==e.userInfo.realname?e.realname=!1:e.realname=!0),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,e,[[0,8]])})))()},handleRemove:function(e,t){},deleteImage:function(){var e=this;0!=this.deleBtn&&(this.imageUrl="",this.appFetch({url:"deleteAvatar",method:"delete",splice:"/"+this.query.id+"/avatar",data:{}}).then((function(t){t.errors?e.$message.error(t.errors[0].code):(e.deleBtn=!1,e.$message.success("删除成功"))})))},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.MessageBox.confirm("确定移除 "+e.name+"？")},handleAvatarSuccess:function(e,t){},handleFile:function(){},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,r=e.size/1024/1024<10;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 10MB!"),t&&r},uploaderLogo:function(e){var t=this,r=new FormData;r.append("avatar",e.file),this.appFetch({url:"upload",method:"post",splice:this.query.id+"/avatar",data:r}).then((function(e){e.errors?t.$message.error(e.errors[0].code):(t.$message.success("上传成功"),t.imageUrl=e.readdata._data.avatarUrl,t.deleBtn=!0)}))},submission:function(){var e=this,t=this.userInfo.originalMobile;if(""==t);else if(!/^((13|14|15|16|17|18|19)[0-9]{1}\d{8})$/.test(t))return this.$toast("您输入的手机号码不合法，请重新输入");this.appFetch({url:"users",method:"patch",splice:"/"+this.query.id,data:{data:{attributes:{newPassword:this.newPassword,mobile:t,groupId:this.userRole,status:this.userInfo.status,refuse_message:this.reasonsForDisable,expired_at:this.expired_at,username:this.userName,password:this.oldPassword,password_confirmation:this.confirmPassword}}}}).then((function(t){t.errors?t.errors[0].detail?e.$message.error(t.errors[0].code+"\n"+t.errors[0].detail[0]):e.$message.error(t.errors[0].code):e.$message({message:"提交成功",type:"success"})}))},getUserList:function(){var e=this;return(0,a.default)(n.default.mark((function t(){var r,a;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.appFetch({method:"get",url:"groups"});case 3:r=t.sent,a=r.data,e.options=a.map((function(e){return{value:e.id,label:e.attributes.name}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,e,[[0,8]])})))()},userStatusChange:function(e){this.disabledReason=1==e,1!=e&&(this.reasonsForDisable="")}},components:{Card:s.default,CardRow:o.default}}},oioR:function(e,t,r){var n=r("2GTP"),a=r("sNwI"),s=r("NwJ3"),o=r("5K7Z"),i=r("tEej"),u=r("fNZA"),c={},l={};(t=e.exports=function(e,t,r,d,f){var v,h,p,m,_=f?function(){return e}:u(e),w=n(r,d,t?2:1),g=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(s(_)){for(v=i(e.length);v>g;g++)if((m=t?w(o(h=e[g])[0],h[1]):w(e[g]))===c||m===l)return m}else for(p=_.call(e);!(h=p.next()).done;)if((m=a(p,w,h.value,t))===c||m===l)return m}).BREAK=c,t.RETURN=l},q6LJ:function(e,t,r){var n=r("5T2Y"),a=r("QXhf").set,s=n.MutationObserver||n.WebKitMutationObserver,o=n.process,i=n.Promise,u="process"==r("a0xu")(o);e.exports=function(){var e,t,r,c=function(){var n,a;for(u&&(n=o.domain)&&n.exit();e;){a=e.fn,e=e.next;try{a()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){o.nextTick(c)};else if(!s||n.navigator&&n.navigator.standalone)if(i&&i.resolve){var l=i.resolve(void 0);r=function(){l.then(c)}}else r=function(){a.call(n,c)};else{var d=!0,f=document.createTextNode("");new s(c).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var a={fn:n,next:void 0};t&&(t.next=a),e||(e=a,r()),t=a}}},u938:function(e,t,r){var n=function(){return this}()||Function("return this")(),a=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,s=a&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r("ls82"),a)n.regeneratorRuntime=s;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},vBP9:function(e,t,r){var n=r("5T2Y").navigator;e.exports=n&&n.userAgent||""},zXhZ:function(e,t,r){var n=r("5K7Z"),a=r("93I4"),s=r("ZW5q");e.exports=function(e,t){if(n(e),a(t)&&t.constructor===e)return t;var r=s.f(e);return(0,r.resolve)(t),r.promise}}}]);